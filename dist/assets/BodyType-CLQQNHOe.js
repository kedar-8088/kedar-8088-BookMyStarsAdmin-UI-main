import{u as be,q as _,j as e,a as u,r as me,ad as fe,ae as ge,af as Te,ag as W,ah as N,ai as je,X as P,aj as J,ak as Q,T as v,al as ve,am as we,an as De,d as D,t as K,Y as Ce,av as Ae,ao as Se,n as R,ap as ke,ar as Ee,as as Z,at as Ie,au as Be,c as We,f as Ne,h as Pe,D as ze}from"./mui-BHd6aP3D.js";import{r as p}from"./react-CeAUEJ0P.js";import{B as k,S as y,M as Me}from"./index-CqEkO1RD.js";import{a as E}from"./vendor-BhB35ZXg.js";import{d as Fe,h as ee}from"./Add-Hd0l8K7I.js";const Re=async(h=0,n=10,x)=>await E({method:"get",url:`${k}/bookmystarsadmin/body-type/v1/getAllByPagination?pageNumber=${h}&pageSize=${n}`,headers:x}),$e=async(h,n)=>{var x,b,m;try{const o=await E({method:"POST",url:`${k}/bookmystarsadmin/body-type/v1/create`,headers:n,data:h}),d=((x=o==null?void 0:o.data)==null?void 0:x.body)||(o==null?void 0:o.data),r=d==null?void 0:d.code,l=(d==null?void 0:d.message)||"Body type created successfully",g=(d==null?void 0:d.error)||"An error occurred";r===200?y.fire("Success",l,"success"):r===400?y.fire("Error",g,"error"):y.fire("Success",l,"success")}catch(o){console.error("Error adding body type:",o);const d=((m=(b=o==null?void 0:o.response)==null?void 0:b.data)==null?void 0:m.message)||(o==null?void 0:o.message)||"Failed to add body type";y.fire("Error",d,"error")}},Le=async(h,n)=>{var x,b,m;try{const o=await E({method:"delete",url:`${k}/bookmystarsadmin/body-type/v1/delete/${h}`,headers:n}),d=((x=o==null?void 0:o.data)==null?void 0:x.body)||(o==null?void 0:o.data),r=d==null?void 0:d.code,l=(d==null?void 0:d.message)||"Body type deleted successfully",g=(d==null?void 0:d.error)||"An error occurred";r===200?y.fire("Deleted!",l,"success"):r===400?y.fire("Error",g,"error"):y.fire("Deleted!",l,"success")}catch(o){console.error("Error deleting body type:",o);const d=((m=(b=o==null?void 0:o.response)==null?void 0:b.data)==null?void 0:m.message)||(o==null?void 0:o.message)||"Failed to delete body type";y.fire("Error",d,"error")}},Oe=async(h,n)=>await E({method:"GET",url:`${k}/bookmystarsadmin/body-type/v1/get/${h}`,headers:n}),Ue=async(h,n)=>{var x,b,m,o,d;try{const r=await E({method:"PUT",url:`${k}/bookmystarsadmin/body-type/v1/update`,headers:n,data:h}),l=((x=r==null?void 0:r.data)==null?void 0:x.body)||(r==null?void 0:r.data),g=l==null?void 0:l.code,T=(l==null?void 0:l.message)||"Body type updated successfully",C=(l==null?void 0:l.error)||"An error occurred";g===200?y.fire("Success",T,"success"):g===400?y.fire("Error",C,"error"):y.fire("Success",T,"success")}catch(r){console.error("Error updating body type:",r);let l="Failed to update body type";(m=(b=r==null?void 0:r.response)==null?void 0:b.data)!=null&&m.error?l=r.response.data.error:(d=(o=r==null?void 0:r.response)==null?void 0:o.data)!=null&&d.message?l=r.response.data.message:r!=null&&r.message&&(l=r.message),y.fire("Error",l,"error")}},Ge=async h=>await E({method:"GET",url:`${k}/bookmystarsadmin/body-type/v1/count`,headers:h}),$=[{id:"bodyTypeId",label:"ID",minWidth:80},{id:"bodyTypeName",label:"Body Type Name",minWidth:150},{id:"bodyTypeDescription",label:"Description",minWidth:200},{id:"isActive",label:"Status",minWidth:100},{id:"insertedDate",label:"Created Date",align:"right",minWidth:120},{id:"updatedDate",label:"Updated Date",align:"right",minWidth:120},{id:"actions",label:"Actions",align:"right",minWidth:120}],_e=()=>{const h=be(),n=_(h.breakpoints.down("sm")),x=_(h.breakpoints.down("md")),[b,m]=p.useState(0),[o,d]=p.useState(10),[r,l]=p.useState([]),[g,T]=p.useState(!1),[C,L]=p.useState(!1),[O,te]=p.useState("list"),[U,G]=p.useState(0),[f,B]=p.useState({bodyTypeName:"",bodyTypeDescription:"",isActive:!0}),[I,z]=p.useState({}),[ae,V]=p.useState(!1),[H,se]=p.useState(null),[oe,M]=p.useState(0),[re,Y]=p.useState(!1),ie=(s,t)=>{m(t)},ne=s=>{d(+s.target.value),m(0)},A=JSON.parse(sessionStorage.getItem("user")),S={"Content-Type":"application/json",Authorization:"Bearer "+((A==null?void 0:A.accessToken)||"")},de=(s,t)=>{t!==null&&te(t)},le=async()=>{var s;try{Y(!0);const t=await Re(b,o,S),a=((s=t==null?void 0:t.data)==null?void 0:s.body)??(t==null?void 0:t.data),i=a==null?void 0:a.data;let c=[],w=0;if(i?Array.isArray(i)?(c=i,w=i.length):i.content&&Array.isArray(i.content)?(c=i.content,w=i.totalElements||i.totalCount||i.content.length):i.bodyTypes&&Array.isArray(i.bodyTypes)?(c=i.bodyTypes,w=i.totalElements||i.totalCount||i.bodyTypes.length):Array.isArray(i)&&(c=i,w=i.length):Array.isArray(a)&&(c=a,w=a.length),c&&Array.isArray(c)){const xe=c.map(j=>({bodyTypeId:j.bodyTypeId,bodyTypeName:j.bodyTypeName||"N/A",bodyTypeDescription:j.bodyTypeDescription||"N/A",isActive:j.isActive!==void 0?j.isActive:!0,insertedDate:j.insertedDate?ee(j.insertedDate).format("L"):"N/A",updatedDate:j.updatedDate?ee(j.updatedDate).format("L"):"N/A"}));l(xe),M(typeof w=="number"?w:0)}else l([]),M(0)}catch(t){console.error("Error fetching data:",t),y.fire("Error","Failed to load body types. Please try again.","error"),l([]),M(0)}finally{Y(!1)}},ce=async()=>{var s;try{const t=await Ge(S),a=((s=t==null?void 0:t.data)==null?void 0:s.body)??(t==null?void 0:t.data),i=(a==null?void 0:a.data)||a||0,c=typeof i=="number"?i:typeof i=="string"&&parseInt(i,10)||0;G(c)}catch(t){console.error("Error fetching count:",t),G(0)}};p.useEffect(()=>{le(),ce()},[ae,b,o]),p.useEffect(()=>{if(g)try{document.activeElement&&document.activeElement.blur()}catch{}},[g]);const ye=async s=>{s.preventDefault();const t=pe();if(Object.keys(t).length>0)z(t);else try{if(C){const a={...f,bodyTypeId:H,updatedBy:{userId:A.userId}};console.log("Update Data Debug:",{updatedData:a,bodyTypeId:H,editMode:C,userdata:f}),await Ue(a,S)}else{const a={...f,createdBy:{userId:A.userId}};await $e(a,S)}B({bodyTypeName:"",bodyTypeDescription:"",isActive:!0}),V(a=>!a),T(!1),z({})}catch(a){console.error("Error saving body type:",a)}},pe=()=>{const s={};return(!f.bodyTypeName||f.bodyTypeName.trim()==="")&&(s.bodyTypeName="Enter the body type name"),(!f.bodyTypeDescription||f.bodyTypeDescription.trim()==="")&&(s.bodyTypeDescription="Enter the description"),s},F=s=>{const{name:t,value:a,type:i,checked:c}=s.target;B({...f,[t]:i==="checkbox"?c:a,createdBy:{userId:A.userId}}),z({...I,[t]:null})},he=()=>{L(!1),B({bodyTypeName:"",bodyTypeDescription:"",isActive:!0}),T(!0)},q=async s=>{var t;L(!0),T(!0);try{const a=await Oe(s,S),i=((t=a==null?void 0:a.data)==null?void 0:t.body)??(a==null?void 0:a.data),c=(i==null?void 0:i.data)||i;console.log("Edit API Response Debug:",{res:a==null?void 0:a.data,responseBody:i,det:c,bodyTypeId:s}),c&&c.bodyTypeId?(se(c.bodyTypeId),B({bodyTypeName:c.bodyTypeName||"",bodyTypeDescription:c.bodyTypeDescription||"",isActive:c.isActive!==void 0?c.isActive:!0})):(y.fire("Error","Failed to load body type details","error"),T(!1))}catch(a){console.error("Error fetching body type details:",a),y.fire("Error","Failed to load body type details. Please try again.","error"),T(!1)}},X=async s=>{y.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async t=>{if(t.isConfirmed)try{await Le(s,S),V(a=>!a),y.fire({title:"Deleted!",text:"Body type has been deleted.",icon:"success"})}catch(a){y.fire({title:"Error!",text:"There was a problem deleting the record.",icon:"error"}),console.error("Error deleting body type:",a)}})},ue=()=>e.jsx(D,{container:!0,spacing:3,children:r.length===0?e.jsx(D,{item:!0,xs:12,children:e.jsxs(u,{sx:{textAlign:"center",py:4},children:[e.jsx(v,{variant:"h6",color:"textSecondary",children:"No body types found"}),e.jsxs(v,{variant:"body2",color:"textSecondary",children:["Body types array length: ",r.length]})]})}):r.map(s=>e.jsx(D,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(We,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #B39DDB 0%, #EDE7F6 100%)",color:"#311B92",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"}},children:e.jsxs(Ne,{sx:{flexGrow:1,position:"relative",zIndex:1},children:[e.jsx(u,{sx:{display:"flex",alignItems:"center",mb:2},children:e.jsxs(u,{children:[e.jsx(v,{variant:"h6",sx:{fontWeight:"bold",mb:.5,color:"#311B92"},children:s.bodyTypeName}),e.jsx(u,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(Pe,{label:s.isActive?"Active":"Inactive",size:"small",sx:{bgcolor:s.isActive?"rgba(76, 175, 80, 0.9)":"rgba(244, 67, 54, 0.9)",color:"white",fontWeight:"bold"}})})]})}),e.jsx(v,{variant:"body2",sx:{mb:2,opacity:.8,color:"#311B92",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:s.bodyTypeDescription}),e.jsx(ze,{sx:{my:1,bgcolor:"rgba(49, 27, 146, 0.2)"}}),e.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(v,{variant:"caption",sx:{opacity:.7,color:"#311B92"},children:["ID: ",s.bodyTypeId]}),e.jsx(v,{variant:"caption",sx:{opacity:.7,color:"#311B92"},children:s.insertedDate})]}),e.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(v,{variant:"caption",sx:{opacity:.7,color:"#311B92"},children:["Updated: ",s.updatedDate]}),e.jsxs(u,{children:[e.jsx(P,{size:"small",onClick:()=>q(s.bodyTypeId),sx:{color:"#311B92"},children:e.jsx(J,{fontSize:"small"})}),e.jsx(P,{size:"small",onClick:()=>X(s.bodyTypeId),sx:{color:"#311B92"},children:e.jsx(Q,{fontSize:"small"})})]})]})]})})},s.bodyTypeId))});return e.jsx(u,{sx:{mt:4,px:{xs:1,sm:2}},children:e.jsxs(Me,{title:e.jsxs(u,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:2,width:"100%"},children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e.jsx(v,{variant:"h4",sx:{fontSize:{xs:"1.2rem",sm:"1.5rem"}},children:"Body Type Management"}),e.jsx(ke,{badgeContent:typeof U=="number"?U:0,color:"primary"})]}),e.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",width:{xs:"100%",sm:"auto"},justifyContent:{xs:"flex-start",sm:"flex-end"}},children:[e.jsxs(Ee,{value:O,exclusive:!0,onChange:de,size:"small",children:[e.jsx(Z,{value:"list","aria-label":"list view",children:e.jsx(Ie,{})}),e.jsx(Z,{value:"card","aria-label":"card view",children:e.jsx(Be,{})})]}),e.jsxs(R,{variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},sx:{display:"flex",alignItems:"center",fontSize:{xs:"13px",sm:"15px"},whiteSpace:"nowrap",width:{xs:"100%",sm:"auto"}},onClick:he,children:[n?"Add":"Add Body Type",e.jsx(Fe,{sx:{color:"#fff",ml:.5}})]})]})]}),children:[O==="card"?ue():(()=>{const s=n?$.filter(t=>["bodyTypeId","bodyTypeName","actions"].includes(t.id)):x?$.filter(t=>!["insertedDate","updatedDate","bodyTypeDescription"].includes(t.id)):$;return e.jsxs(me,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(fe,{sx:{maxHeight:440,overflowX:"auto","&::-webkit-scrollbar":{height:"8px"},"&::-webkit-scrollbar-track":{backgroundColor:"#f1f1f1"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:"#555"}},children:e.jsxs(ge,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:n?600:"100%"},children:[e.jsx(Te,{children:e.jsx(W,{children:s.map(t=>e.jsx(N,{align:t.align,sx:{minWidth:n?t.minWidth?Math.min(t.minWidth,100):"auto":t.minWidth,fontWeight:600,fontSize:n?13:15,whiteSpace:"nowrap",...t.id==="actions"&&{textAlign:"right"}},children:t.label},t.id))})}),e.jsx(je,{children:re?e.jsx(W,{children:e.jsx(N,{colSpan:s.length,align:"center",children:"Loading..."})}):r.length===0?e.jsx(W,{children:e.jsx(N,{colSpan:s.length,align:"center",children:"No data found"})}):r.map(t=>e.jsx(W,{hover:!0,role:"checkbox",tabIndex:-1,children:s.map(a=>e.jsx(N,{align:a.align,sx:{fontSize:n?12:14,whiteSpace:"nowrap",...a.id==="actions"&&{textAlign:"right"}},children:a.id==="isActive"?e.jsx(u,{sx:{backgroundColor:t.isActive?"#4caf50":"#f44336",color:"white",padding:n?"2px 6px":"4px 8px",borderRadius:"4px",fontSize:n?"10px":"12px",fontWeight:"bold",textAlign:"center",display:"inline-block",minWidth:n?60:80},children:t.isActive?"Active":"Inactive"}):a.id==="actions"?e.jsxs(u,{sx:{display:"flex",gap:.5,flexWrap:"wrap",justifyContent:"flex-end"},children:[e.jsx(P,{size:n?"small":"medium",onClick:()=>q(t.bodyTypeId),style:{color:"#00afb5"},children:e.jsx(J,{fontSize:n?"small":"medium"})}),e.jsx(P,{size:n?"small":"medium",onClick:()=>X(t.bodyTypeId),color:"error",children:e.jsx(Q,{fontSize:n?"small":"medium"})})]}):e.jsx(v,{variant:"body2",sx:{fontSize:n?12:14,overflow:"hidden",textOverflow:"ellipsis",maxWidth:n?150:"none"},children:t[a.id]})},a.id))},t.bodyTypeId))})]})}),e.jsx(ve,{rowsPerPageOptions:n?[10,25]:[10,25,100],component:"div",count:oe,rowsPerPage:o,page:b,onPageChange:ie,onRowsPerPageChange:ne,sx:{overflowX:"auto","& .MuiTablePagination-toolbar":{flexWrap:"wrap",gap:1},"& .MuiTablePagination-selectLabel":{fontSize:n?12:14},"& .MuiTablePagination-displayedRows":{fontSize:n?12:14}}})]})})(),e.jsxs(we,{open:g,onClose:()=>T(!1),fullWidth:!0,maxWidth:n?"xs":"md",fullScreen:n,children:[e.jsx(De,{sx:{fontWeight:"bold",fontSize:"1.25rem",backgroundColor:"#f5f5f5"},children:C?"Edit Body Type":"Add Body Type"}),e.jsxs(u,{component:"form",onSubmit:ye,noValidate:!0,sx:{p:{xs:2,sm:3}},children:[e.jsxs(D,{container:!0,spacing:2,children:[e.jsx(D,{item:!0,xs:12,children:e.jsx(K,{fullWidth:!0,label:"Body Type Name",name:"bodyTypeName",value:f.bodyTypeName,onChange:F,error:!!I.bodyTypeName,helperText:I.bodyTypeName,autoFocus:!0,required:!0})}),e.jsx(D,{item:!0,xs:12,children:e.jsx(K,{fullWidth:!0,label:"Description",name:"bodyTypeDescription",value:f.bodyTypeDescription,onChange:F,error:!!I.bodyTypeDescription,helperText:I.bodyTypeDescription,multiline:!0,rows:3,required:!0})}),e.jsx(D,{item:!0,xs:12,children:e.jsx(Ce,{control:e.jsx(Ae,{checked:f.isActive,onChange:F,name:"isActive",color:"primary"}),label:"Active Status"})})]}),e.jsxs(Se,{children:[e.jsx(R,{type:"submit",variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},children:C?"Update":"Add"}),e.jsx(R,{onClick:()=>T(!1),style:{color:"#00afb5"},children:"Cancel"})]})]})]})]})})};export{_e as default};
