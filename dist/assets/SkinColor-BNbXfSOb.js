import{u as Ce,q as K,j as e,a as u,d as w,T as j,ap as be,aK as Q,ar as ve,as as Z,at as je,au as ye,n as $,am as Se,an as we,t as ee,Y as De,av as Ae,ao as Ee,c as Fe,f as Ie,A as Te,h as Ne,D as Pe,X as z,aj as oe,ak as re,r as ze,ad as We,ae as Be,af as Me,ag as O,ah as R,ai as $e,al as Oe}from"./mui-BHd6aP3D.js";import{r as p}from"./react-CeAUEJ0P.js";import{B as E,S as h,M as Re,g as Le}from"./index-CqEkO1RD.js";import{a as F}from"./vendor-BhB35ZXg.js";import{d as Ve,h as te}from"./Add-Hd0l8K7I.js";const Ue=async(m,a=0,k=10)=>await F({method:"get",url:`${E}/bookmystarsadmin/skin-color/v1/getAllByPagination?pageNumber=${a}&pageSize=${k}`,headers:m}),Ge=async(m,a)=>{var k,C,b;try{const s=await F({method:"POST",url:`${E}/bookmystarsadmin/skin-color/v1/create`,headers:a,data:m}),n=((k=s==null?void 0:s.data)==null?void 0:k.body)||(s==null?void 0:s.data),i=n==null?void 0:n.code,c=(n==null?void 0:n.message)||"Skin Color created successfully",v=(n==null?void 0:n.error)||"An error occurred";i===200?h.fire("Success",c,"success"):i===400?h.fire("Error",v,"error"):h.fire("Success",c,"success")}catch(s){console.error("Error adding skin color:",s);const n=((b=(C=s==null?void 0:s.response)==null?void 0:C.data)==null?void 0:b.message)||(s==null?void 0:s.message)||"Failed to add skin color";h.fire("Error",n,"error")}},He=async(m,a)=>{var k,C,b;try{const s=await F({method:"delete",url:`${E}/bookmystarsadmin/skin-color/v1/delete/${m}`,headers:a}),n=((k=s==null?void 0:s.data)==null?void 0:k.body)||(s==null?void 0:s.data),i=n==null?void 0:n.code,c=(n==null?void 0:n.message)||"Skin Color deleted successfully",v=(n==null?void 0:n.error)||"An error occurred";i===200?h.fire("Deleted!",c,"success"):i===400?h.fire("Error",v,"error"):h.fire("Deleted!",c,"success")}catch(s){console.error("Error deleting skin color:",s);const n=((b=(C=s==null?void 0:s.response)==null?void 0:C.data)==null?void 0:b.message)||(s==null?void 0:s.message)||"Failed to delete skin color";h.fire("Error",n,"error")}},Ye=async(m,a)=>await F({method:"GET",url:`${E}/bookmystarsadmin/skin-color/v1/get/${m}`,headers:a}),Xe=async(m,a)=>{var k,C,b,s,n;try{const i=await F({method:"PUT",url:`${E}/bookmystarsadmin/skin-color/v1/update`,headers:a,data:m}),c=((k=i==null?void 0:i.data)==null?void 0:k.body)||(i==null?void 0:i.data),v=c==null?void 0:c.code,y=(c==null?void 0:c.message)||"Skin Color updated successfully",I=(c==null?void 0:c.error)||"An error occurred";v===200?h.fire("Success",y,"success"):v===400?h.fire("Error",I,"error"):h.fire("Success",y,"success")}catch(i){console.error("Error updating skin color:",i);let c="Failed to update skin color";(b=(C=i==null?void 0:i.response)==null?void 0:C.data)!=null&&b.error?c=i.response.data.error:(n=(s=i==null?void 0:i.response)==null?void 0:s.data)!=null&&n.message?c=i.response.data.message:i!=null&&i.message&&(c=i.message),h.fire("Error",c,"error")}},_e=async m=>await F({method:"GET",url:`${E}/bookmystarsadmin/skin-color/v1/count`,headers:m}),L=[{id:"skinColorId",label:"ID"},{id:"skinColorName",label:"Skin Color Name",minWidth:150},{id:"skinColorDescription",label:"Description",minWidth:200},{id:"isActive",label:"Status",align:"center"},{id:"insertedDate",label:"Created Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],eo=()=>{const m=Ce(),a=K(m.breakpoints.down("sm")),k=K(m.breakpoints.down("md")),[C,b]=p.useState(0),[s,n]=p.useState(10),[i,c]=p.useState([]),[v,y]=p.useState(!1),[I,W]=p.useState(!1),[V,se]=p.useState("list"),[g,T]=p.useState({skinColorName:"",skinColorDescription:"",isActive:!0}),[N,P]=p.useState({}),[ie,U]=p.useState(!1),[ae,G]=p.useState(null),[ne,B]=p.useState(0),[H,Y]=p.useState(0),le=(r,o)=>{b(o)},ce=r=>{n(+r.target.value),b(0)},de=(r,o)=>{o!==null&&se(o)},x=JSON.parse(sessionStorage.getItem("user")),A={"Content-Type":"application/json",Authorization:"Bearer "+(x==null?void 0:x.accessToken)},he=async()=>{var r;try{if(!x||!x.accessToken){console.error("User not authenticated"),h.fire("Error","Please login to continue","error");return}const o=await Ue(A,C,s),t=((r=o==null?void 0:o.data)==null?void 0:r.body)??(o==null?void 0:o.data),l=t==null?void 0:t.data,d=(l==null?void 0:l.content)||(l==null?void 0:l.skinColors)||l||[],D=l!=null&&l.totalElements||l!=null&&l.totalCount||Array.isArray(d)?d.length:0;if(d&&Array.isArray(d)){const S=d.map(f=>{const J=f.isActive!==void 0?f.isActive:f.active!==void 0?f.active:!0;return console.log(`Skin Color ${f.skinColorName} - isActive field: ${f.isActive}, active field: ${f.active}, final value: ${J}`),{skinColorId:f.skinColorId,skinColorName:f.skinColorName||"N/A",skinColorDescription:f.skinColorDescription||"N/A",isActive:J?"Active":"Inactive",insertedDate:f.insertedDate?te(f.insertedDate).format("L"):"N/A",updatedDate:f.updatedDate?te(f.updatedDate).format("L"):"N/A"}});c(S),B(typeof D=="number"?D:0)}else c([]),B(0)}catch(o){console.error("Error fetching data:",o),h.fire("Error","Failed to load skin colors. Please try again.","error"),c([]),B(0)}},xe=async()=>{var r;try{const o=await _e(A),t=((r=o==null?void 0:o.data)==null?void 0:r.body)??(o==null?void 0:o.data),l=(t==null?void 0:t.data)||t||0,d=typeof l=="number"?l:typeof l=="string"&&parseInt(l,10)||0;Y(d)}catch(o){console.error("Error fetching skin color count:",o),Y(0)}};p.useEffect(()=>{he(),xe()},[ie,C,s]),p.useEffect(()=>{if(v)try{document.activeElement&&document.activeElement.blur()}catch{}},[v]);const ue=async r=>{var t,l,d,D;r.preventDefault();const o=me();if(Object.keys(o).length>0)P(o);else try{if(I){const S={skinColorId:ae,skinColorName:((t=g.skinColorName)==null?void 0:t.trim())||"",skinColorDescription:((l=g.skinColorDescription)==null?void 0:l.trim())||"",isActive:!!g.isActive,updatedBy:x!=null&&x.userId?{userId:x.userId,userName:x.userName||x.username||"admin"}:{userId:1,userName:"admin"}};await Xe(S,A)}else{const S={skinColorName:((d=g.skinColorName)==null?void 0:d.trim())||"",skinColorDescription:((D=g.skinColorDescription)==null?void 0:D.trim())||"",isActive:!!g.isActive,insertedBy:x!=null&&x.userId?{userId:x.userId,userName:x.userName||x.username||"admin"}:{userId:1,userName:"admin"}};await Ge(S,A)}T({skinColorName:"",skinColorDescription:"",isActive:!0}),U(S=>!S),y(!1)}catch(S){console.error("Error saving skin color:",S),h.fire("Error","Failed to save skin color. Please try again.","error")}},me=()=>{const r={};return(!g.skinColorName||g.skinColorName.trim()==="")&&(r.skinColorName="Enter the skin color name"),(!g.skinColorDescription||g.skinColorDescription.trim()==="")&&(r.skinColorDescription="Enter the skin color description"),r},M=r=>{const{name:o,value:t,checked:l}=r.target;T({...g,[o]:o==="isActive"?l:t}),P({...N,[o]:null})},ge=()=>{W(!1),T({skinColorName:"",skinColorDescription:"",isActive:!0}),P({}),y(!0)},X=()=>{y(!1),W(!1),T({skinColorName:"",skinColorDescription:"",isActive:!0}),P({}),G(null)},_=async r=>{var o;W(!0),y(!0);try{const t=await Ye(r,A),l=((o=t==null?void 0:t.data)==null?void 0:o.body)??(t==null?void 0:t.data),d=(l==null?void 0:l.data)||l;if(d&&d.skinColorId){console.log("Skin Color details for edit:",d);const D=d.isActive!==void 0?d.isActive:d.active!==void 0?d.active:!0;G(d.skinColorId),T({skinColorName:d.skinColorName||"",skinColorDescription:d.skinColorDescription||"",isActive:!!D})}else h.fire("Error","Failed to load skin color details","error"),y(!1)}catch(t){console.error("Error fetching skin color details:",t),h.fire("Error","Failed to load skin color details. Please try again.","error"),y(!1)}},q=async r=>{h.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async o=>{if(o.isConfirmed)try{await He(r,A),U(t=>!t),h.fire({title:"Deleted!",text:"Skin Color has been deleted.",icon:"success"})}catch(t){h.fire({title:"Error!",text:"There was a problem deleting the skin color.",icon:"error"}),console.error("Error deleting skin color:",t)}})},fe=r=>({Fair:"#FDBCB4",Light:"#F4C2A1",Medium:"#D08B5B",Olive:"#8B7355",Tan:"#D2B48C",Brown:"#8B4513","Dark Brown":"#654321",Black:"#2F1B14",Pale:"#F5DEB3",Ivory:"#FFFFF0",Beige:"#F5F5DC",Golden:"#FFD700",Bronze:"#CD7F32",Copper:"#B87333",Mahogany:"#C04000"})[r]||"#E0E0E0",pe=()=>e.jsx(w,{container:!0,spacing:3,children:i.length===0?e.jsx(w,{item:!0,xs:12,children:e.jsxs(u,{sx:{textAlign:"center",py:4},children:[e.jsx(j,{variant:"h6",color:"textSecondary",children:"No skin colors found"}),e.jsxs(j,{variant:"body2",color:"textSecondary",children:["Skin colors array length: ",i.length]})]})}):i.map(r=>e.jsx(w,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(Fe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #FFF8E1 0%, #FFECB3 100%)",color:"#F57C00",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"}},children:[e.jsx(u,{sx:{position:"absolute",top:0,right:0,width:100,height:100,background:"rgba(255,255,255,0.3)",borderRadius:"50%",transform:"translate(30px, -30px)"}}),e.jsxs(Ie,{sx:{flexGrow:1,position:"relative",zIndex:1},children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Te,{sx:{bgcolor:fe(r.skinColorName),mr:2,width:40,height:40,color:"#000",border:"2px solid #fff",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:e.jsx(Q,{})}),e.jsxs(u,{children:[e.jsx(j,{variant:"h6",sx:{fontWeight:"bold",mb:.5,color:"#F57C00"},children:r.skinColorName}),e.jsx(u,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(Ne,{label:r.isActive,size:"small",sx:{bgcolor:r.isActive==="Active"?"rgba(76, 175, 80, 0.9)":"rgba(244, 67, 54, 0.9)",color:"white",fontWeight:"bold"}})})]})]}),e.jsx(j,{variant:"body2",sx:{mb:2,opacity:.8,color:"#F57C00",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:r.skinColorDescription}),e.jsx(Pe,{sx:{my:1,bgcolor:"rgba(245, 124, 0, 0.2)"}}),e.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(j,{variant:"caption",sx:{opacity:.7,color:"#F57C00"},children:["ID: ",r.skinColorId]}),e.jsx(j,{variant:"caption",sx:{opacity:.7,color:"#F57C00"},children:r.insertedDate})]}),e.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(j,{variant:"caption",sx:{opacity:.7,color:"#F57C00"},children:["Updated: ",r.updatedDate]}),e.jsxs(u,{children:[e.jsx(z,{size:"small",onClick:()=>_(r.skinColorId),sx:{color:"#F57C00","&:hover":{bgcolor:"rgba(245, 124, 0, 0.1)"}},children:e.jsx(oe,{fontSize:"small"})}),e.jsx(z,{size:"small",onClick:()=>q(r.skinColorId),sx:{color:"#F57C00","&:hover":{bgcolor:"rgba(245, 124, 0, 0.1)"}},children:e.jsx(re,{fontSize:"small"})})]})]})]})]})},r.skinColorId))}),ke=()=>{const r=a?L.filter(o=>["skinColorId","skinColorName","actions"].includes(o.id)):k?L.filter(o=>!["insertedDate","updatedDate","skinColorDescription"].includes(o.id)):L;return e.jsxs(ze,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(We,{sx:{maxHeight:440,overflowX:"auto","&::-webkit-scrollbar":{height:"8px"},"&::-webkit-scrollbar-track":{backgroundColor:"#f1f1f1"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:"#555"}},children:e.jsxs(Be,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:a?600:"100%"},children:[e.jsx(Me,{children:e.jsx(O,{children:r.map(o=>e.jsx(R,{align:o.align,sx:{minWidth:a?o.minWidth?Math.min(o.minWidth,100):"auto":o.minWidth,fontWeight:600,fontSize:a?13:15,whiteSpace:"nowrap",...o.id==="actions"&&{textAlign:"right"}},children:o.label},o.id))})}),e.jsx($e,{children:i.length===0?e.jsx(O,{children:e.jsx(R,{colSpan:r.length,align:"center",children:e.jsxs(u,{sx:{py:2},children:[e.jsx("div",{children:"No skin colors found"}),e.jsxs("div",{style:{fontSize:"12px",color:"gray"},children:["Skin colors array length: ",i.length]})]})})}):i.map(o=>e.jsx(O,{hover:!0,role:"checkbox",tabIndex:-1,children:r.map(t=>e.jsx(R,{align:t.align,sx:{fontSize:a?12:14,whiteSpace:"nowrap",...t.id==="actions"&&{textAlign:"right"}},children:t.id==="actions"?e.jsxs(u,{sx:{display:"flex",gap:.5,flexWrap:"wrap",justifyContent:"flex-end"},children:[e.jsx(z,{size:a?"small":"medium",onClick:()=>_(o.skinColorId),style:{color:"#00afb5"},children:e.jsx(oe,{fontSize:a?"small":"medium"})}),e.jsx(z,{size:a?"small":"medium",onClick:()=>q(o.skinColorId),color:"error",children:e.jsx(re,{fontSize:a?"small":"medium"})})]}):t.id==="isActive"?e.jsx(u,{sx:{backgroundColor:o[t.id]==="Active"?"#4caf50":"#f44336",color:"white",padding:a?"2px 6px":"4px 8px",borderRadius:"4px",fontSize:a?"10px":"12px",fontWeight:"bold",display:"inline-block"},children:o[t.id]}):t.id==="skinColorDescription"?e.jsx(j,{variant:"body2",sx:{maxWidth:a?120:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:a?12:14},children:o[t.id]}):e.jsx(j,{variant:"body2",sx:{fontSize:a?12:14,overflow:"hidden",textOverflow:"ellipsis",maxWidth:a?120:"none"},children:o[t.id]})},t.id))},o.skinColorId))})]})}),e.jsx(Oe,{rowsPerPageOptions:a?[10,25]:[10,25,100],component:"div",count:ne,rowsPerPage:s,page:C,onPageChange:le,onRowsPerPageChange:ce,sx:{overflowX:"auto","& .MuiTablePagination-toolbar":{flexWrap:"wrap",gap:1},"& .MuiTablePagination-selectLabel":{fontSize:a?12:14},"& .MuiTablePagination-displayedRows":{fontSize:a?12:14}}})]})};return e.jsxs(u,{sx:{mt:4,px:{xs:1,sm:2}},children:[e.jsxs(Re,{title:e.jsxs(u,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:2,width:"100%"},children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e.jsx(j,{variant:"h4",sx:{fontSize:{xs:"1.2rem",sm:"1.5rem"}},children:"Skin Color Management"}),e.jsx(be,{badgeContent:typeof H=="number"?H:0,color:"primary",children:e.jsx(Q,{color:"action"})})]}),e.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",width:{xs:"100%",sm:"auto"},justifyContent:{xs:"flex-start",sm:"flex-end"}},children:[e.jsxs(ve,{value:V,exclusive:!0,onChange:de,size:"small",sx:{bgcolor:"background.paper"},children:[e.jsx(Z,{value:"list","aria-label":"list view",children:e.jsx(je,{})}),e.jsx(Z,{value:"card","aria-label":"card view",children:e.jsx(ye,{})})]}),e.jsxs($,{variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},sx:{display:"flex",alignItems:"center",fontSize:{xs:"13px",sm:"15px"},whiteSpace:"nowrap",width:{xs:"100%",sm:"auto"}},onClick:ge,children:[a?"Add":"Add Skin Color",e.jsx(Ve,{sx:{color:"#fff",ml:.5}})]})]})]}),children:[e.jsx(w,{container:!0,spacing:Le}),V==="card"?pe():ke()]}),e.jsxs(Se,{open:v,onClose:X,fullWidth:!0,maxWidth:a?"xs":"md",fullScreen:a,children:[e.jsx(we,{sx:{fontWeight:"bold",fontSize:"1.25rem",backgroundColor:"#f5f5f5"},children:I?"Edit Skin Color":"Add Skin Color"}),e.jsxs(u,{component:"form",onSubmit:ue,noValidate:!0,sx:{p:{xs:2,sm:3}},children:[e.jsxs(w,{container:!0,spacing:2,children:[e.jsx(w,{item:!0,xs:12,md:6,children:e.jsx(ee,{fullWidth:!0,label:"Skin Color Name",name:"skinColorName",value:g.skinColorName,onChange:M,error:!!N.skinColorName,helperText:N.skinColorName,placeholder:"e.g., Fair, Light, Medium, Olive, Tan, Brown, Dark Brown"})}),e.jsx(w,{item:!0,xs:12,children:e.jsx(ee,{fullWidth:!0,label:"Skin Color Description",name:"skinColorDescription",value:g.skinColorDescription,onChange:M,error:!!N.skinColorDescription,helperText:N.skinColorDescription,placeholder:"Describe the skin color characteristics and appearance",multiline:!0,rows:4})}),e.jsx(w,{item:!0,xs:12,children:e.jsx(De,{control:e.jsx(Ae,{checked:g.isActive,onChange:M,name:"isActive",color:"primary"}),label:"Active Status"})})]}),e.jsxs(Ee,{children:[e.jsx($,{type:"submit",variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},children:I?"Update":"Add"}),e.jsx($,{onClick:X,style:{color:"#00afb5"},children:"Cancel"})]})]})]})]})};export{eo as default};
