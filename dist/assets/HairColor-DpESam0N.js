import{u as Ce,q as Q,j as e,a as m,d as A,T as y,ap as be,aG as K,ar as ve,as as Z,at as je,au as ye,n as $,am as we,an as De,t as ee,Y as Ae,av as Se,ao as Ee,c as ke,f as Ie,A as Ne,h as Te,D as He,X as z,aj as re,ak as ae,r as Pe,ad as ze,ae as We,af as Me,ag as Y,ah as R,ai as Fe,al as $e}from"./mui-BHd6aP3D.js";import{r as p}from"./react-CeAUEJ0P.js";import{B as k,S as h,M as Ye,g as Re}from"./index-CqEkO1RD.js";import{a as I}from"./vendor-BhB35ZXg.js";import{d as Be,h as te}from"./Add-Hd0l8K7I.js";const Oe=async(g,s=0,C=10)=>await I({method:"get",url:`${k}/bookmystarsadmin/hair-color/v1/getAllByPagination?pageNumber=${s}&pageSize=${C}`,headers:g}),Ve=async(g,s)=>{var C,b,v;try{const o=await I({method:"POST",url:`${k}/bookmystarsadmin/hair-color/v1/create`,headers:s,data:g}),l=((C=o==null?void 0:o.data)==null?void 0:C.body)||(o==null?void 0:o.data),i=l==null?void 0:l.code,c=(l==null?void 0:l.message)||"Hair Color created successfully",j=(l==null?void 0:l.error)||"An error occurred";i===200?h.fire("Success",c,"success"):i===400?h.fire("Error",j,"error"):h.fire("Success",c,"success")}catch(o){console.error("Error adding hair color:",o);const l=((v=(b=o==null?void 0:o.response)==null?void 0:b.data)==null?void 0:v.message)||(o==null?void 0:o.message)||"Failed to add hair color";h.fire("Error",l,"error")}},Ue=async(g,s)=>{var C,b,v;try{const o=await I({method:"delete",url:`${k}/bookmystarsadmin/hair-color/v1/delete/${g}`,headers:s}),l=((C=o==null?void 0:o.data)==null?void 0:C.body)||(o==null?void 0:o.data),i=l==null?void 0:l.code,c=(l==null?void 0:l.message)||"Hair Color deleted successfully",j=(l==null?void 0:l.error)||"An error occurred";i===200?h.fire("Deleted!",c,"success"):i===400?h.fire("Error",j,"error"):h.fire("Deleted!",c,"success")}catch(o){console.error("Error deleting hair color:",o);const l=((v=(b=o==null?void 0:o.response)==null?void 0:b.data)==null?void 0:v.message)||(o==null?void 0:o.message)||"Failed to delete hair color";h.fire("Error",l,"error")}},Ge=async(g,s)=>await I({method:"GET",url:`${k}/bookmystarsadmin/hair-color/v1/get/${g}`,headers:s}),Le=async(g,s)=>{var C,b,v,o,l;try{const i=await I({method:"PUT",url:`${k}/bookmystarsadmin/hair-color/v1/update`,headers:s,data:g}),c=((C=i==null?void 0:i.data)==null?void 0:C.body)||(i==null?void 0:i.data),j=c==null?void 0:c.code,w=(c==null?void 0:c.message)||"Hair Color updated successfully",N=(c==null?void 0:c.error)||"An error occurred";j===200?h.fire("Success",w,"success"):j===400?h.fire("Error",N,"error"):h.fire("Success",w,"success")}catch(i){console.error("Error updating hair color:",i);let c="Failed to update hair color";(v=(b=i==null?void 0:i.response)==null?void 0:b.data)!=null&&v.error?c=i.response.data.error:(l=(o=i==null?void 0:i.response)==null?void 0:o.data)!=null&&l.message?c=i.response.data.message:i!=null&&i.message&&(c=i.message),h.fire("Error",c,"error")}},Xe=async g=>await I({method:"GET",url:`${k}/bookmystarsadmin/hair-color/v1/count`,headers:g}),B=[{id:"hairColorId",label:"ID"},{id:"hairColorName",label:"Hair Color Name",minWidth:150},{id:"hairColorDescription",label:"Description",minWidth:200},{id:"isActive",label:"Status",align:"center"},{id:"insertedDate",label:"Created Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],Ze=()=>{const g=Ce(),s=Q(g.breakpoints.down("sm")),C=Q(g.breakpoints.down("md")),[b,v]=p.useState(0),[o,l]=p.useState(10),[i,c]=p.useState([]),[j,w]=p.useState(!1),[N,W]=p.useState(!1),[O,oe]=p.useState("list"),[f,T]=p.useState({hairColorName:"",hairColorDescription:"",isActive:!0}),[H,P]=p.useState({}),[ie,V]=p.useState(!1),[se,U]=p.useState(null),[le,M]=p.useState(0),[G,L]=p.useState(0),ne=(a,r)=>{v(r)},ce=a=>{l(+a.target.value),v(0)},de=(a,r)=>{r!==null&&oe(r)},x=JSON.parse(sessionStorage.getItem("user")),E={"Content-Type":"application/json",Authorization:"Bearer "+(x==null?void 0:x.accessToken)},he=async()=>{var a;try{if(!x||!x.accessToken){console.error("User not authenticated"),h.fire("Error","Please login to continue","error");return}const r=await Oe(E,b,o),t=((a=r==null?void 0:r.data)==null?void 0:a.body)??(r==null?void 0:r.data),n=t==null?void 0:t.data,d=(n==null?void 0:n.content)||(n==null?void 0:n.hairColors)||n||[],S=n!=null&&n.totalElements||n!=null&&n.totalCount||Array.isArray(d)?d.length:0;if(d&&Array.isArray(d)){const D=d.map(u=>{const J=u.isActive!==void 0?u.isActive:u.active!==void 0?u.active:!0;return console.log(`Hair Color ${u.hairColorName} - isActive field: ${u.isActive}, active field: ${u.active}, final value: ${J}`),console.log(`Date fields - insertedDate: ${u.insertedDate}, updatedDate: ${u.updatedDate}`),{hairColorId:u.hairColorId,hairColorName:u.hairColorName||"N/A",hairColorDescription:u.hairColorDescription||"N/A",isActive:J?"Active":"Inactive",insertedDate:u.insertedDate?te(u.insertedDate).format("MMM DD, YYYY"):"N/A",updatedDate:u.updatedDate?te(u.updatedDate).format("MMM DD, YYYY"):"N/A"}});c(D),M(typeof S=="number"?S:0)}else c([]),M(0)}catch(r){console.error("Error fetching data:",r),h.fire("Error","Failed to load hair colors. Please try again.","error"),c([]),M(0)}},xe=async()=>{var a;try{const r=await Xe(E),t=((a=r==null?void 0:r.data)==null?void 0:a.body)??(r==null?void 0:r.data),n=(t==null?void 0:t.data)||t||0,d=typeof n=="number"?n:typeof n=="string"&&parseInt(n,10)||0;L(d)}catch(r){console.error("Error fetching hair color count:",r),L(0)}};p.useEffect(()=>{he(),xe()},[ie,b,o]),p.useEffect(()=>{if(j)try{document.activeElement&&document.activeElement.blur()}catch{}},[j]);const ue=async a=>{var t,n,d,S;a.preventDefault();const r=me();if(Object.keys(r).length>0)P(r);else try{if(N){const D={hairColorId:se,hairColorName:((t=f.hairColorName)==null?void 0:t.trim())||"",hairColorDescription:((n=f.hairColorDescription)==null?void 0:n.trim())||"",isActive:!!f.isActive,updatedBy:x!=null&&x.userId?{userId:x.userId,userName:x.userName||x.username||"admin"}:{userId:1,userName:"admin"}};await Le(D,E)}else{const D={hairColorName:((d=f.hairColorName)==null?void 0:d.trim())||"",hairColorDescription:((S=f.hairColorDescription)==null?void 0:S.trim())||"",isActive:!!f.isActive,insertedBy:x!=null&&x.userId?{userId:x.userId,userName:x.userName||x.username||"admin"}:{userId:1,userName:"admin"}};await Ve(D,E)}T({hairColorName:"",hairColorDescription:"",isActive:!0}),V(D=>!D),w(!1)}catch(D){console.error("Error saving hair color:",D),h.fire("Error","Failed to save hair color. Please try again.","error")}},me=()=>{const a={};return(!f.hairColorName||f.hairColorName.trim()==="")&&(a.hairColorName="Enter the hair color name"),(!f.hairColorDescription||f.hairColorDescription.trim()==="")&&(a.hairColorDescription="Enter the hair color description"),a},F=a=>{const{name:r,value:t,checked:n}=a.target;T({...f,[r]:r==="isActive"?n:t}),P({...H,[r]:null})},ge=()=>{W(!1),T({hairColorName:"",hairColorDescription:"",isActive:!0}),P({}),w(!0)},X=()=>{w(!1),W(!1),T({hairColorName:"",hairColorDescription:"",isActive:!0}),P({}),U(null)},_=async a=>{var r;W(!0),w(!0);try{const t=await Ge(a,E),n=((r=t==null?void 0:t.data)==null?void 0:r.body)??(t==null?void 0:t.data),d=(n==null?void 0:n.data)||n;if(d&&d.hairColorId){console.log("Hair Color details for edit:",d);const S=d.isActive!==void 0?d.isActive:d.active!==void 0?d.active:!0;U(d.hairColorId),T({hairColorName:d.hairColorName||"",hairColorDescription:d.hairColorDescription||"",isActive:!!S})}else h.fire("Error","Failed to load hair color details","error"),w(!1)}catch(t){console.error("Error fetching hair color details:",t),h.fire("Error","Failed to load hair color details. Please try again.","error"),w(!1)}},q=async a=>{h.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async r=>{if(r.isConfirmed)try{await Ue(a,E),V(t=>!t),h.fire({title:"Deleted!",text:"Hair Color has been deleted.",icon:"success"})}catch(t){h.fire({title:"Error!",text:"There was a problem deleting the hair color.",icon:"error"}),console.error("Error deleting hair color:",t)}})},fe=()=>e.jsx(A,{container:!0,spacing:3,children:i.length===0?e.jsx(A,{item:!0,xs:12,children:e.jsxs(m,{sx:{textAlign:"center",py:4},children:[e.jsx(y,{variant:"h6",color:"textSecondary",children:"No hair colors found"}),e.jsxs(y,{variant:"body2",color:"textSecondary",children:["Hair colors array length: ",i.length]})]})}):i.map(a=>e.jsx(A,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(ke,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%)",color:"#E65100",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"}},children:[e.jsx(m,{sx:{position:"absolute",top:0,right:0,width:100,height:100,background:"rgba(255,255,255,0.3)",borderRadius:"50%",transform:"translate(30px, -30px)"}}),e.jsxs(Ie,{sx:{flexGrow:1,position:"relative",zIndex:1},children:[e.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ne,{sx:{bgcolor:"rgba(230, 81, 0, 0.2)",mr:2,width:40,height:40,color:"#E65100"},children:e.jsx(K,{})}),e.jsxs(m,{children:[e.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:.5,color:"#E65100"},children:a.hairColorName}),e.jsx(m,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(Te,{label:a.isActive,size:"small",sx:{bgcolor:a.isActive==="Active"?"rgba(76, 175, 80, 0.9)":"rgba(244, 67, 54, 0.9)",color:"white",fontWeight:"bold"}})})]})]}),e.jsx(y,{variant:"body2",sx:{mb:2,opacity:.8,color:"#E65100",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:a.hairColorDescription}),e.jsx(He,{sx:{my:1,bgcolor:"rgba(230, 81, 0, 0.2)"}}),e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(y,{variant:"caption",sx:{opacity:.7,color:"#E65100"},children:["ID: ",a.hairColorId]}),e.jsx(y,{variant:"caption",sx:{opacity:.7,color:"#E65100"},children:a.insertedDate})]}),e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(y,{variant:"caption",sx:{opacity:.7,color:"#E65100"},children:["Updated: ",a.updatedDate]}),e.jsxs(m,{children:[e.jsx(z,{size:"small",onClick:()=>_(a.hairColorId),sx:{color:"#E65100","&:hover":{bgcolor:"rgba(230, 81, 0, 0.1)"}},children:e.jsx(re,{fontSize:"small"})}),e.jsx(z,{size:"small",onClick:()=>q(a.hairColorId),sx:{color:"#E65100","&:hover":{bgcolor:"rgba(230, 81, 0, 0.1)"}},children:e.jsx(ae,{fontSize:"small"})})]})]})]})]})},a.hairColorId))}),pe=()=>{const a=s?B.filter(r=>["hairColorId","hairColorName","actions"].includes(r.id)):C?B.filter(r=>!["insertedDate","updatedDate","hairColorDescription"].includes(r.id)):B;return e.jsxs(Pe,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(ze,{sx:{maxHeight:440,overflowX:"auto","&::-webkit-scrollbar":{height:"8px"},"&::-webkit-scrollbar-track":{backgroundColor:"#f1f1f1"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:"#555"}},children:e.jsxs(We,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:s?600:"100%"},children:[e.jsx(Me,{children:e.jsx(Y,{children:a.map(r=>e.jsx(R,{align:r.align,sx:{minWidth:s?r.minWidth?Math.min(r.minWidth,100):"auto":r.minWidth,fontWeight:600,fontSize:s?13:15,whiteSpace:"nowrap",...r.id==="actions"&&{textAlign:"right"}},children:r.label},r.id))})}),e.jsx(Fe,{children:i.length===0?e.jsx(Y,{children:e.jsx(R,{colSpan:a.length,align:"center",children:e.jsxs(m,{sx:{py:2},children:[e.jsx("div",{children:"No hair colors found"}),e.jsxs("div",{style:{fontSize:"12px",color:"gray"},children:["Hair colors array length: ",i.length]})]})})}):i.map(r=>e.jsx(Y,{hover:!0,role:"checkbox",tabIndex:-1,children:a.map(t=>e.jsx(R,{align:t.align,sx:{fontSize:s?12:14,whiteSpace:"nowrap",...t.id==="actions"&&{textAlign:"right"}},children:t.id==="actions"?e.jsxs(m,{sx:{display:"flex",gap:.5,flexWrap:"wrap",justifyContent:"flex-end"},children:[e.jsx(z,{size:s?"small":"medium",onClick:()=>_(r.hairColorId),style:{color:"#00afb5"},children:e.jsx(re,{fontSize:s?"small":"medium"})}),e.jsx(z,{size:s?"small":"medium",onClick:()=>q(r.hairColorId),color:"error",children:e.jsx(ae,{fontSize:s?"small":"medium"})})]}):t.id==="isActive"?e.jsx(m,{sx:{backgroundColor:r[t.id]==="Active"?"#4caf50":"#f44336",color:"white",padding:s?"2px 6px":"4px 8px",borderRadius:"4px",fontSize:s?"10px":"12px",fontWeight:"bold",display:"inline-block"},children:r[t.id]}):t.id==="hairColorDescription"?e.jsx(y,{variant:"body2",sx:{maxWidth:s?120:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:s?12:14},children:r[t.id]}):e.jsx(y,{variant:"body2",sx:{fontSize:s?12:14,overflow:"hidden",textOverflow:"ellipsis",maxWidth:s?120:"none"},children:r[t.id]})},t.id))},r.hairColorId))})]})}),e.jsx($e,{rowsPerPageOptions:s?[10,25]:[10,25,100],component:"div",count:le,rowsPerPage:o,page:b,onPageChange:ne,onRowsPerPageChange:ce,sx:{overflowX:"auto","& .MuiTablePagination-toolbar":{flexWrap:"wrap",gap:1},"& .MuiTablePagination-selectLabel":{fontSize:s?12:14},"& .MuiTablePagination-displayedRows":{fontSize:s?12:14}}})]})};return e.jsxs(m,{sx:{mt:4,px:{xs:1,sm:2}},children:[e.jsxs(Ye,{title:e.jsxs(m,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:2,width:"100%"},children:[e.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e.jsx(y,{variant:"h4",sx:{fontSize:{xs:"1.2rem",sm:"1.5rem"}},children:"Hair Color Management"}),e.jsx(be,{badgeContent:typeof G=="number"?G:0,color:"primary",children:e.jsx(K,{color:"action"})})]}),e.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",width:{xs:"100%",sm:"auto"},justifyContent:{xs:"flex-start",sm:"flex-end"}},children:[e.jsxs(ve,{value:O,exclusive:!0,onChange:de,size:"small",sx:{bgcolor:"background.paper"},children:[e.jsx(Z,{value:"list","aria-label":"list view",children:e.jsx(je,{})}),e.jsx(Z,{value:"card","aria-label":"card view",children:e.jsx(ye,{})})]}),e.jsxs($,{variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},sx:{display:"flex",alignItems:"center",fontSize:{xs:"13px",sm:"15px"},whiteSpace:"nowrap",width:{xs:"100%",sm:"auto"}},onClick:ge,children:[s?"Add":"Add Hair Color",e.jsx(Be,{sx:{color:"#fff",ml:.5}})]})]})]}),children:[e.jsx(A,{container:!0,spacing:Re}),O==="card"?fe():pe()]}),e.jsxs(we,{open:j,onClose:X,fullWidth:!0,maxWidth:s?"xs":"md",fullScreen:s,children:[e.jsx(De,{sx:{fontWeight:"bold",fontSize:"1.25rem",backgroundColor:"#f5f5f5"},children:N?"Edit Hair Color":"Add Hair Color"}),e.jsxs(m,{component:"form",onSubmit:ue,noValidate:!0,sx:{p:{xs:2,sm:3}},children:[e.jsxs(A,{container:!0,spacing:2,children:[e.jsx(A,{item:!0,xs:12,md:6,children:e.jsx(ee,{fullWidth:!0,label:"Hair Color Name",name:"hairColorName",value:f.hairColorName,onChange:F,error:!!H.hairColorName,helperText:H.hairColorName,placeholder:"e.g., Black, Brown, Blonde, Red"})}),e.jsx(A,{item:!0,xs:12,children:e.jsx(ee,{fullWidth:!0,label:"Hair Color Description",name:"hairColorDescription",value:f.hairColorDescription,onChange:F,error:!!H.hairColorDescription,helperText:H.hairColorDescription,placeholder:"Describe the hair color characteristics",multiline:!0,rows:4})}),e.jsx(A,{item:!0,xs:12,children:e.jsx(Ae,{control:e.jsx(Se,{checked:f.isActive,onChange:F,name:"isActive",color:"primary"}),label:"Active Status"})})]}),e.jsxs(Ee,{children:[e.jsx($,{type:"submit",variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},children:N?"Update":"Add"}),e.jsx($,{onClick:X,style:{color:"#00afb5"},children:"Cancel"})]})]})]})]})};export{Ze as default};
