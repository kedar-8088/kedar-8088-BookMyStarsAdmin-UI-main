import{j as t,a as p,d as c,P as x}from"./mui-DJAgGlcD.js";import{r as a}from"./react-CeAUEJ0P.js";import{a as j}from"./vendor-BhB35ZXg.js";import{M as w,B as m,g as u}from"./index-BvpLlJd4.js";import{j as y}from"./carousel.min-h4a26kmx.js";const v=({filePath:r})=>{const[e,h]=a.useState(""),s=JSON.parse(sessionStorage.getItem("user"));return a.useEffect(()=>r?((async()=>{try{const n=await j.get(`${m}/file/downloadFile/?filePath=${encodeURIComponent(r)}`,{headers:{Authorization:`Bearer ${s==null?void 0:s.accessToken}`},responseType:"blob"}),o=new Blob([n.data],{type:n.headers["content-type"]}),i=URL.createObjectURL(o);h(i)}catch(n){console.error("Error fetching image:",n),h("")}})(),()=>{e&&URL.revokeObjectURL(e)}):void 0,[r,s==null?void 0:s.accessToken]),e?t.jsx("img",{src:e,style:{width:"100%",height:"100%",objectFit:"cover"},alt:"Advertisement"}):"Loading..."},b=async r=>{try{const e=await fetch(`${m}/advertisement/v1/queryAllAdvertisement`,{method:"GET",headers:r});if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching banner data:",e),[]}},g=()=>{const[r,e]=a.useState([]),[h,s]=a.useState(!0),l=JSON.parse(sessionStorage.getItem("user")),n={"Content-Type":"application/json",Authorization:`Bearer ${l==null?void 0:l.accessToken}`};return a.useEffect(()=>{(async()=>{s(!0);try{const i=await b(n);if(i.length>0){const f=i.map(d=>({advertisementId:d.advertisementId,filePath:d.filePath||null}));e(f)}else e([])}catch(i){console.error("Error fetching data:",i)}finally{s(!1)}})()},[]),t.jsx(w,{border:!1,content:!1,sx:{mt:4,width:"100%",height:450},children:t.jsx(p,{sx:{width:"100%",height:"100%"},children:t.jsx(c,{container:!0,direction:"column",sx:{width:"100%",height:"100%"},children:t.jsx(c,{item:!0,xs:12,sx:{width:"100%",height:"100%"},children:h?t.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading..."}):t.jsx(y.Carousel,{showThumbs:!1,showArrows:!0,showIndicators:!0,showStatus:!1,infiniteLoop:!0,autoPlay:!0,interval:3e3,transitionTime:500,stopOnHover:!0,dynamicHeight:!1,swipeable:!0,emulateTouch:!0,style:{width:"100%",height:450},children:r.length>0?r.map(o=>o.filePath?t.jsx("div",{style:{width:"100%",height:450},children:t.jsx(v,{filePath:o.filePath})},o.advertisementId):null):t.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"No Data"})})})})})})};g.propTypes={isLoading:x.bool};const I=()=>{const[r,e]=a.useState(!0);return a.useEffect(()=>{e(!1)},[]),t.jsx(c,{container:!0,spacing:u,children:t.jsx(c,{item:!0,xs:12,children:t.jsx(c,{container:!0,spacing:u,children:t.jsx(c,{item:!0,lg:12,md:12,sm:12,xs:12,children:t.jsx(g,{isLoading:r})})})})})};export{I as default};
