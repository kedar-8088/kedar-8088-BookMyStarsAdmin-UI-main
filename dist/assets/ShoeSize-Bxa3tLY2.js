import{u as we,q as se,j as e,a as x,d as C,T as A,ap as Ae,aJ as te,ar as Ue,as as ie,at as Ee,au as ke,n as L,am as Ie,an as De,t as ae,U as re,V as oe,ay as ne,az as g,Y as Ve,av as Ne,ao as Te,c as Fe,f as We,A as Pe,h as O,D as Me,X as $,aj as le,ak as ce,r as $e,ad as Re,ae as Le,af as Oe,ag as G,ah as H,ai as Ge,al as He}from"./mui-BHd6aP3D.js";import{r as S}from"./react-CeAUEJ0P.js";import{B as D,S as m,M as Ke,g as Ye}from"./index-CqEkO1RD.js";import{a as V}from"./vendor-BhB35ZXg.js";import{d as Xe,h as de}from"./Add-Hd0l8K7I.js";const Je=async(z,o=0,f=10)=>await V({method:"get",url:`${D}/bookmystarsadmin/shoe-size/v1/getAllByPagination?pageNumber=${o}&pageSize=${f}`,headers:z}),_e=async(z,o)=>{var f,b,j;try{const i=await V({method:"POST",url:`${D}/bookmystarsadmin/shoe-size/v1/create`,headers:o,data:z}),c=((f=i==null?void 0:i.data)==null?void 0:f.body)||(i==null?void 0:i.data),r=c==null?void 0:c.code,d=(c==null?void 0:c.message)||"Shoe Size created successfully",v=(c==null?void 0:c.error)||"An error occurred";r===200?m.fire("Success",d,"success"):r===400?m.fire("Error",v,"error"):m.fire("Success",d,"success")}catch(i){console.error("Error adding shoe size:",i);const c=((j=(b=i==null?void 0:i.response)==null?void 0:b.data)==null?void 0:j.message)||(i==null?void 0:i.message)||"Failed to add shoe size";m.fire("Error",c,"error")}},qe=async(z,o)=>{var f,b,j;try{const i=await V({method:"delete",url:`${D}/bookmystarsadmin/shoe-size/v1/delete/${z}`,headers:o}),c=((f=i==null?void 0:i.data)==null?void 0:f.body)||(i==null?void 0:i.data),r=c==null?void 0:c.code,d=(c==null?void 0:c.message)||"Shoe Size deleted successfully",v=(c==null?void 0:c.error)||"An error occurred";r===200?m.fire("Deleted!",d,"success"):r===400?m.fire("Error",v,"error"):m.fire("Deleted!",d,"success")}catch(i){console.error("Error deleting shoe size:",i);const c=((j=(b=i==null?void 0:i.response)==null?void 0:b.data)==null?void 0:j.message)||(i==null?void 0:i.message)||"Failed to delete shoe size";m.fire("Error",c,"error")}},Qe=async(z,o)=>await V({method:"GET",url:`${D}/bookmystarsadmin/shoe-size/v1/get/${z}`,headers:o}),Be=async(z,o)=>{var f,b,j,i,c;try{const r=await V({method:"PUT",url:`${D}/bookmystarsadmin/shoe-size/v1/update`,headers:o,data:z}),d=((f=r==null?void 0:r.data)==null?void 0:f.body)||(r==null?void 0:r.data),v=d==null?void 0:d.code,w=d==null?void 0:d.status,k=(d==null?void 0:d.message)||"Shoe Size updated successfully",N=(d==null?void 0:d.error)||"An error occurred";v===201||v===200||w==="SUCCESS"?m.fire("Success",k,"success"):v===400?m.fire("Error",N,"error"):m.fire("Success",k,"success")}catch(r){console.error("Error updating shoe size:",r);let d="Failed to update shoe size";(j=(b=r==null?void 0:r.response)==null?void 0:b.data)!=null&&j.error?d=r.response.data.error:(c=(i=r==null?void 0:r.response)==null?void 0:i.data)!=null&&c.message?d=r.response.data.message:r!=null&&r.message&&(d=r.message),m.fire("Error",d,"error")}},Ze=async z=>await V({method:"GET",url:`${D}/bookmystarsadmin/shoe-size/v1/count`,headers:z}),K=[{id:"shoeSizeId",label:"ID"},{id:"shoeSizeName",label:"Shoe Size Name",minWidth:120},{id:"sizeSystem",label:"Size System",minWidth:100},{id:"sizeValue",label:"Size Value",minWidth:100},{id:"sizeUnit",label:"Size Unit",minWidth:100},{id:"isActive",label:"Status",align:"center"},{id:"insertedDate",label:"Created Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],rs=()=>{const z=we(),o=se(z.breakpoints.down("sm")),f=se(z.breakpoints.down("md")),[b,j]=S.useState(0),[i,c]=S.useState(10),[r,d]=S.useState([]),[v,w]=S.useState(!1),[k,N]=S.useState(!1),[Y,he]=S.useState("list"),[h,T]=S.useState({shoeSizeName:"",sizeSystem:"",sizeUnit:"",sizeValue:"",isActive:!0}),[p,P]=S.useState({}),[me,X]=S.useState(!1),[ue,J]=S.useState(null),[xe,R]=S.useState(0),[_,q]=S.useState(0),ze=(t,s)=>{j(s)},ge=t=>{c(+t.target.value),j(0)},Se=(t,s)=>{s!==null&&he(s)},y=JSON.parse(sessionStorage.getItem("user")),I={"Content-Type":"application/json",Authorization:"Bearer "+(y==null?void 0:y.accessToken)},fe=async()=>{var t;try{if(!y||!y.accessToken){console.error("User not authenticated"),m.fire("Error","Please login to continue","error");return}const s=await Je(I,b,i),a=((t=s==null?void 0:s.data)==null?void 0:t.body)??(s==null?void 0:s.data),n=a==null?void 0:a.data,l=(n==null?void 0:n.content)||(n==null?void 0:n.shoeSizes)||n||[],U=n!=null&&n.totalElements||n!=null&&n.totalCount||Array.isArray(l)?l.length:0;if(l&&Array.isArray(l)){const M=l.map(u=>{const W=u.isActive!==void 0?u.isActive:u.active!==void 0?u.active:!0;return console.log(`Shoe Size ${u.shoeSizeName} - isActive field: ${u.isActive}, active field: ${u.active}, final value: ${W}`),{shoeSizeId:u.shoeSizeId,shoeSizeName:u.shoeSizeName||"N/A",sizeSystem:u.sizeSystem||"N/A",sizeValue:u.sizeValue||"N/A",sizeUnit:u.sizeUnit||"N/A",isActive:W?"Active":"Inactive",insertedDate:u.insertedDate?de(u.insertedDate).format("L"):"N/A",updatedDate:u.updatedDate?de(u.updatedDate).format("L"):"N/A"}});d(M),R(typeof U=="number"?U:0)}else d([]),R(0)}catch(s){console.error("Error fetching data:",s),m.fire("Error","Failed to load shoe sizes. Please try again.","error"),d([]),R(0)}},be=async()=>{var t;try{const s=await Ze(I),a=((t=s==null?void 0:s.data)==null?void 0:t.body)??(s==null?void 0:s.data),n=(a==null?void 0:a.data)||a||0,l=typeof n=="number"?n:typeof n=="string"&&parseInt(n,10)||0;q(l)}catch(s){console.error("Error fetching shoe size count:",s),q(0)}};S.useEffect(()=>{fe(),be()},[me,b,i]),S.useEffect(()=>{if(v)try{document.activeElement&&document.activeElement.blur()}catch{}},[v]);const je=async t=>{var a,n,l,U,M,u,W,ee;t.preventDefault();const s=ve();if(Object.keys(s).length>0)P(s);else try{if(k){const E={shoeSizeId:ue,shoeSizeName:((a=h.shoeSizeName)==null?void 0:a.toString().trim())||"",sizeSystem:((n=h.sizeSystem)==null?void 0:n.toString().trim())||"",sizeUnit:((l=h.sizeUnit)==null?void 0:l.toString().trim())||"",sizeValue:((U=h.sizeValue)==null?void 0:U.toString().trim())||""};await Be(E,I)}else{const E={shoeSizeName:((M=h.shoeSizeName)==null?void 0:M.trim())||"",sizeSystem:((u=h.sizeSystem)==null?void 0:u.trim())||"",sizeUnit:((W=h.sizeUnit)==null?void 0:W.trim())||"",sizeValue:((ee=h.sizeValue)==null?void 0:ee.trim())||"",isActive:!!h.isActive,insertedBy:y!=null&&y.userId?{userId:y.userId,userName:y.userName||y.username||"admin"}:{userId:1,userName:"admin"}};await _e(E,I)}T({shoeSizeName:"",sizeSystem:"",sizeUnit:"",sizeValue:"",isActive:!0}),X(E=>!E),w(!1)}catch(E){console.error("Error saving shoe size:",E),m.fire("Error","Failed to save shoe size. Please try again.","error")}},ve=()=>{var n,l;const t={};(!h.shoeSizeName||h.shoeSizeName.trim()==="")&&(t.shoeSizeName="Enter the shoe size name"),(!h.sizeSystem||h.sizeSystem.trim()==="")&&(t.sizeSystem="Select a size system");const s=((n=h.sizeValue)==null?void 0:n.toString())||"";(!s||s.trim()==="")&&(t.sizeValue="Enter the size value");const a=((l=h.sizeUnit)==null?void 0:l.toString())||"";return(!a||a.trim()==="")&&(t.sizeUnit="Select a size unit"),t},F=t=>{const{name:s,value:a,checked:n}=t.target;T({...h,[s]:s==="isActive"?n:a}),P({...p,[s]:null})},pe=()=>{N(!1),T({shoeSizeName:"",sizeSystem:"",sizeUnit:"",sizeValue:"",isActive:!0}),P({}),w(!0)},Q=()=>{w(!1),N(!1),T({shoeSizeName:"",sizeSystem:"",sizeUnit:"",sizeValue:"",isActive:!0}),P({}),J(null)},B=async t=>{var s;N(!0),w(!0);try{const a=await Qe(t,I),n=((s=a==null?void 0:a.data)==null?void 0:s.body)??(a==null?void 0:a.data),l=(n==null?void 0:n.data)||n;if(l&&l.shoeSizeId){console.log("Shoe Size details for edit:",l);const U=l.isActive!==void 0?l.isActive:l.active!==void 0?l.active:!0;J(l.shoeSizeId),T({shoeSizeName:l.shoeSizeName||"",sizeSystem:l.sizeSystem||"",sizeUnit:l.sizeUnit?String(l.sizeUnit):"",sizeValue:l.sizeValue!==null&&l.sizeValue!==void 0?String(l.sizeValue):"",isActive:!!U})}else m.fire("Error","Failed to load shoe size details","error"),w(!1)}catch(a){console.error("Error fetching shoe size details:",a),m.fire("Error","Failed to load shoe size details. Please try again.","error"),w(!1)}},Z=async t=>{m.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async s=>{if(s.isConfirmed)try{await qe(t,I),X(a=>!a),m.fire({title:"Deleted!",text:"Shoe Size has been deleted.",icon:"success"})}catch(a){m.fire({title:"Error!",text:"There was a problem deleting the shoe size.",icon:"error"}),console.error("Error deleting shoe size:",a)}})},ye=()=>e.jsx(C,{container:!0,spacing:o?2:3,children:r.length===0?e.jsx(C,{item:!0,xs:12,children:e.jsxs(x,{sx:{textAlign:"center",py:4},children:[e.jsx(A,{variant:"h6",color:"textSecondary",children:"No shoe sizes found"}),e.jsxs(A,{variant:"body2",color:"textSecondary",children:["Shoe sizes array length: ",r.length]})]})}):r.map(t=>e.jsx(C,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(Fe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #FFF8E1 0%, #FFECB3 100%)",color:"#F57C00",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"}},children:[e.jsx(x,{sx:{position:"absolute",top:0,right:0,width:100,height:100,background:"rgba(255,255,255,0.3)",borderRadius:"50%",transform:"translate(30px, -30px)"}}),e.jsxs(We,{sx:{flexGrow:1,position:"relative",zIndex:1},children:[e.jsxs(x,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Pe,{sx:{bgcolor:"rgba(245, 124, 0, 0.2)",mr:2,width:40,height:40,color:"#F57C00"},children:e.jsx(te,{})}),e.jsxs(x,{children:[e.jsx(A,{variant:"h6",sx:{fontWeight:"bold",mb:.5,color:"#F57C00"},children:t.shoeSizeName}),e.jsxs(x,{sx:{display:"flex",gap:1,alignItems:"center",mb:1},children:[e.jsx(O,{label:t.sizeSystem,size:"small",sx:{bgcolor:"rgba(245, 124, 0, 0.2)",color:"#F57C00",fontWeight:"bold"}}),e.jsx(O,{label:`${t.sizeValue} ${t.sizeUnit}`,size:"small",sx:{bgcolor:"rgba(245, 124, 0, 0.2)",color:"#F57C00",fontWeight:"bold"}})]}),e.jsx(x,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(O,{label:t.isActive,size:"small",sx:{bgcolor:t.isActive==="Active"?"rgba(76, 175, 80, 0.9)":"rgba(244, 67, 54, 0.9)",color:"white",fontWeight:"bold"}})})]})]}),e.jsx(Me,{sx:{my:1,bgcolor:"rgba(245, 124, 0, 0.2)"}}),e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(A,{variant:"caption",sx:{opacity:.7,color:"#F57C00"},children:["ID: ",t.shoeSizeId]}),e.jsx(A,{variant:"caption",sx:{opacity:.7,color:"#F57C00"},children:t.insertedDate})]}),e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(A,{variant:"caption",sx:{opacity:.7,color:"#F57C00"},children:["Updated: ",t.updatedDate]}),e.jsxs(x,{children:[e.jsx($,{size:"small",onClick:()=>B(t.shoeSizeId),sx:{color:"#F57C00","&:hover":{bgcolor:"rgba(245, 124, 0, 0.1)"}},children:e.jsx(le,{fontSize:"small"})}),e.jsx($,{size:"small",onClick:()=>Z(t.shoeSizeId),sx:{color:"#F57C00","&:hover":{bgcolor:"rgba(245, 124, 0, 0.1)"}},children:e.jsx(ce,{fontSize:"small"})})]})]})]})]})},t.shoeSizeId))}),Ce=()=>{const t=o?K.filter(s=>["shoeSizeId","shoeSizeName","sizeValue","actions"].includes(s.id)):f?K.filter(s=>!["insertedDate","updatedDate"].includes(s.id)):K;return e.jsxs($e,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(Re,{sx:{maxHeight:440,overflowX:"auto","&::-webkit-scrollbar":{height:"8px"},"&::-webkit-scrollbar-track":{backgroundColor:"#f1f1f1"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:"#555"}},children:e.jsxs(Le,{stickyHeader:!0,"aria-label":"sticky table",sx:{minWidth:o?600:"100%"},children:[e.jsx(Oe,{children:e.jsx(G,{children:t.map(s=>e.jsx(H,{align:s.align,sx:{minWidth:o?s.minWidth?Math.min(s.minWidth,100):"auto":s.minWidth,fontWeight:600,fontSize:o?13:15,whiteSpace:"nowrap",...s.id==="actions"&&{textAlign:"right"}},children:s.label},s.id))})}),e.jsx(Ge,{children:r.length===0?e.jsx(G,{children:e.jsx(H,{colSpan:t.length,align:"center",children:e.jsx(x,{sx:{py:2},children:e.jsx("div",{children:"No shoe sizes found"})})})}):r.map(s=>e.jsx(G,{hover:!0,role:"checkbox",tabIndex:-1,children:t.map(a=>e.jsx(H,{align:a.align,sx:{fontSize:o?12:14,whiteSpace:"nowrap",...a.id==="actions"&&{textAlign:"right"}},children:a.id==="isActive"?e.jsx(x,{sx:{backgroundColor:s.isActive==="Active"?"#4caf50":"#f44336",color:"white",padding:o?"2px 6px":"4px 8px",borderRadius:"4px",fontSize:o?"10px":"12px",fontWeight:"bold",textAlign:"center",display:"inline-block",minWidth:o?60:80},children:s.isActive}):a.id==="actions"?e.jsxs(x,{sx:{display:"flex",gap:.5,justifyContent:"flex-end"},children:[e.jsx($,{size:o?"small":"medium",onClick:()=>B(s.shoeSizeId),style:{color:"#00afb5"},children:e.jsx(le,{fontSize:o?"small":"medium"})}),e.jsx($,{size:o?"small":"medium",onClick:()=>Z(s.shoeSizeId),color:"error",children:e.jsx(ce,{fontSize:o?"small":"medium"})})]}):e.jsx(A,{variant:"body2",sx:{fontSize:o?12:14,overflow:"hidden",textOverflow:"ellipsis",maxWidth:o?150:"none"},children:s[a.id]})},a.id))},s.shoeSizeId))})]})}),e.jsx(He,{rowsPerPageOptions:o?[10,25]:[10,25,100],component:"div",count:xe,rowsPerPage:i,page:b,onPageChange:ze,onRowsPerPageChange:ge,sx:{overflowX:"auto","& .MuiTablePagination-toolbar":{flexWrap:"wrap",gap:1},"& .MuiTablePagination-selectLabel":{fontSize:o?12:14},"& .MuiTablePagination-displayedRows":{fontSize:o?12:14}}})]})};return e.jsxs(x,{sx:{mt:4,px:{xs:1,sm:2}},children:[e.jsxs(Ke,{title:e.jsxs(x,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:2,width:"100%"},children:[e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e.jsx(A,{variant:"h4",sx:{fontSize:{xs:"1.2rem",sm:"1.5rem"}},children:"Shoe Size Management"}),e.jsx(Ae,{badgeContent:typeof _=="number"?_:0,color:"primary",children:e.jsx(te,{color:"action"})})]}),e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",width:{xs:"100%",sm:"auto"},justifyContent:{xs:"flex-start",sm:"flex-end"}},children:[e.jsxs(Ue,{value:Y,exclusive:!0,onChange:Se,size:"small",children:[e.jsx(ie,{value:"list","aria-label":"list view",children:e.jsx(Ee,{})}),e.jsx(ie,{value:"card","aria-label":"card view",children:e.jsx(ke,{})})]}),e.jsxs(L,{variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},sx:{display:"flex",alignItems:"center",fontSize:{xs:"13px",sm:"15px"},whiteSpace:"nowrap",width:{xs:"100%",sm:"auto"}},onClick:pe,children:[o?"Add":"Add Shoe Size",e.jsx(Xe,{sx:{color:"#fff",ml:.5}})]})]})]}),children:[e.jsx(C,{container:!0,spacing:Ye}),Y==="card"?ye():Ce()]}),e.jsxs(Ie,{open:v,onClose:Q,fullWidth:!0,maxWidth:o?"xs":"md",fullScreen:o,children:[e.jsx(De,{sx:{fontWeight:"bold",fontSize:"1.25rem",backgroundColor:"#f5f5f5"},children:k?"Edit Shoe Size":"Add Shoe Size"}),e.jsxs(x,{component:"form",onSubmit:je,noValidate:!0,sx:{p:{xs:2,sm:3}},children:[e.jsxs(C,{container:!0,spacing:2,children:[e.jsx(C,{item:!0,xs:12,md:6,children:e.jsx(ae,{fullWidth:!0,label:"Shoe Size Name",name:"shoeSizeName",value:h.shoeSizeName,onChange:F,error:!!p.shoeSizeName,helperText:p.shoeSizeName,placeholder:"e.g., Size 8, Size 9, Size 10"})}),e.jsx(C,{item:!0,xs:12,md:6,children:e.jsxs(re,{fullWidth:!0,error:!!p.sizeSystem,children:[e.jsx(oe,{children:"Size System"}),e.jsxs(ne,{name:"sizeSystem",value:h.sizeSystem,onChange:F,label:"Size System",children:[e.jsx(g,{value:"",children:e.jsx("em",{children:"Select size system"})}),e.jsx(g,{value:"US",children:"US"}),e.jsx(g,{value:"UK",children:"UK"}),e.jsx(g,{value:"EU",children:"EU"}),e.jsx(g,{value:"CM",children:"CM"})]}),p.sizeSystem&&e.jsx(x,{sx:{color:"error.main",fontSize:"0.75rem",mt:.5},children:p.sizeSystem})]})}),e.jsx(C,{item:!0,xs:12,md:6,children:e.jsx(ae,{fullWidth:!0,label:"Size Value",name:"sizeValue",value:h.sizeValue,onChange:F,error:!!p.sizeValue,helperText:p.sizeValue,placeholder:"e.g., 8, 9, 10, 42, 43"})}),e.jsx(C,{item:!0,xs:12,md:6,children:e.jsxs(re,{fullWidth:!0,error:!!p.sizeUnit,children:[e.jsx(oe,{children:"Size Unit"}),e.jsxs(ne,{name:"sizeUnit",value:h.sizeUnit,onChange:F,label:"Size Unit",children:[e.jsx(g,{value:"",children:e.jsx("em",{children:"Select size unit"})}),e.jsx(g,{value:"US",children:"US"}),e.jsx(g,{value:"UK",children:"UK"}),e.jsx(g,{value:"EU",children:"EU"}),e.jsx(g,{value:"CM",children:"CM"}),e.jsx(g,{value:"inches",children:"Inches"}),e.jsx(g,{value:"cm",children:"Centimeters"}),e.jsx(g,{value:"mm",children:"Millimeters"}),e.jsx(g,{value:"number",children:"Number"})]}),p.sizeUnit&&e.jsx(x,{sx:{color:"error.main",fontSize:"0.75rem",mt:.5},children:p.sizeUnit})]})}),e.jsx(C,{item:!0,xs:12,children:e.jsx(Ve,{control:e.jsx(Ne,{checked:h.isActive,onChange:F,name:"isActive",color:"primary"}),label:"Active Status"})})]}),e.jsxs(Te,{children:[e.jsx(L,{type:"submit",variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},children:k?"Update":"Add"}),e.jsx(L,{onClick:Q,style:{color:"#00afb5"},children:"Cancel"})]})]})]})]})};export{rs as default};
