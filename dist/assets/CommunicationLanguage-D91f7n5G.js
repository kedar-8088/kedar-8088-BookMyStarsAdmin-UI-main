import{u as ce,j as e,a as s,d as u,ap as de,aD as R,ar as ge,as as M,at as ue,au as he,n as E,am as xe,an as me,t as O,Y as fe,av as pe,ao as be,T as h,c as je,f as Ce,A as ve,h as U,D as ye,X as w,aj as V,ak as G,r as we,ad as Se,ae as De,af as Ee,ag as A,ah as I,ai as Ae,al as Ie}from"./mui-DJAgGlcD.js";import{r as d}from"./react-CeAUEJ0P.js";import{B as C,S as l,M as Le,g as Te}from"./index-BvpLlJd4.js";import{a as v}from"./vendor-BhB35ZXg.js";import{d as ke,h as H}from"./Add-DIF5rR4-.js";const Ne=async(o,c=0,n=10)=>await v({method:"get",url:`${C}/v1/communicationlanguage/list?pageNumber=${c}&pageSize=${n}`,headers:o}),Fe=async(o,c)=>{try{const n=await v({method:"POST",url:`${C}/v1/communicationlanguage/create`,headers:c,data:o});n.data.code===200?l.fire("Success",n.data.message,"success"):n.data.code===400&&l.fire("Error",n.data.error,"error")}catch(n){l.fire("Error",n.message,"error")}},Be=async(o,c)=>await v({method:"delete",url:`${C}/v1/communicationlanguage/${o}`,headers:c}).then(n=>{n.data.code===200?l.fire("Deleted!",n.data.message,"success"):n.data.code===400&&l.fire("Error",n.data.error,"error")}).catch(n=>{l.fire("Error",n.message,"error")}),Pe=async(o,c)=>await v({method:"GET",url:`${C}/v1/communicationlanguage/${o}`,headers:c}),ze=async(o,c)=>await v({method:"PUT",url:`${C}/v1/communicationlanguage/update/${o.languageId}`,headers:c,data:o}).then(n=>{n.data.code===200?l.fire("Success",n.data.message,"success"):n.data.code===400&&l.fire("Error",n.data.error,"error")}).catch(n=>{l.fire("Error",n.message,"error")}),L=[{id:"languageId",label:"ID"},{id:"languageName",label:"Language Name",minWidth:150},{id:"languageCode",label:"Language Code",minWidth:120},{id:"isActive",label:"Status",align:"center"},{id:"insertedDate",label:"Created Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],Ue=()=>{ce();const[o,c]=d.useState(0),[n,Y]=d.useState(10),[x,T]=d.useState([]),[J,m]=d.useState(!1),[S,k]=d.useState(!1),[N,X]=d.useState("list"),[i,y]=d.useState({languageName:"",languageCode:"",isActive:!0}),[f,F]=d.useState({}),[_,B]=d.useState(!1),[q,K]=d.useState(null),[P,z]=d.useState(0),Q=(a,t)=>{c(t)},Z=a=>{Y(+a.target.value),c(0)},ee=(a,t)=>{t!==null&&X(t)},p=JSON.parse(sessionStorage.getItem("user")),b={"Content-Type":"application/json",Authorization:"Bearer "+(p==null?void 0:p.accessToken)},ae=async()=>{var a,t;try{if(!p||!p.accessToken){console.error("User not authenticated"),l.fire("Error","Please login to continue","error");return}const r=await Ne(b,o,n),j=((a=r.data.data)==null?void 0:a.content)||[],ie=((t=r.data.data)==null?void 0:t.totalElements)||0;if(j&&Array.isArray(j)){const le=j.map(g=>({languageId:g.languageId,languageName:g.languageName,languageCode:g.languageCode,isActive:g.isActive?"Active":"Inactive",insertedDate:g.insertedDate?H(g.insertedDate).format("L"):"N/A",updatedDate:g.updatedDate?H(g.updatedDate).format("L"):"N/A"}));T(le),z(ie)}else T([]),z(0)}catch(r){console.error("Error fetching data:",r)}};d.useEffect(()=>{ae()},[_,o,n]);const te=async a=>{a.preventDefault();const t=ne();if(Object.keys(t).length>0)F(t);else try{if(S){const r={languageId:q,languageName:i.languageName,languageCode:i.languageCode,isActive:i.isActive};await ze(r,b)}else{const r={...i,insertedDate:new Date().toISOString(),updatedDate:new Date().toISOString()};await Fe(r,b)}y({languageName:"",languageCode:"",isActive:!0}),B(r=>!r),m(!1)}catch(r){console.error("Error saving communication language:",r)}},ne=()=>{const a={};return(!i.languageName||i.languageName.trim()==="")&&(a.languageName="Enter the language name"),(!i.languageCode||i.languageCode.trim()==="")&&(a.languageCode="Enter the language code"),i.languageCode&&!/^[a-z]{2,3}$/.test(i.languageCode.toLowerCase())&&(a.languageCode="Language code must be 2-3 lowercase letters"),a},D=a=>{const{name:t,value:r,checked:j}=a.target;y({...i,[t]:t==="isActive"?j:r}),F({...f,[t]:null})},re=()=>{k(!1),y({languageName:"",languageCode:"",isActive:!0}),m(!0)},W=async a=>{k(!0),m(!0);try{const t=await Pe(a,b),r=t.data.data||t.data;K(r.languageId),y({languageName:r.languageName,languageCode:r.languageCode,isActive:r.isActive})}catch(t){console.error("Error fetching communication language details:",t)}},$=async a=>{l.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async t=>{if(t.isConfirmed)try{await Be(a,b),B(r=>!r),l.fire({title:"Deleted!",text:"Communication language has been deleted.",icon:"success"})}catch(r){l.fire({title:"Error!",text:"There was a problem deleting the communication language.",icon:"error"}),console.error("Error deleting communication language:",r)}})},se=()=>e.jsx(u,{container:!0,spacing:3,children:x.length===0?e.jsx(u,{item:!0,xs:12,children:e.jsxs(s,{sx:{textAlign:"center",py:4},children:[e.jsx(h,{variant:"h6",color:"textSecondary",children:"No communication languages found"}),e.jsxs(h,{variant:"body2",color:"textSecondary",children:["Languages array length: ",x.length]})]})}):x.map(a=>e.jsx(u,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(je,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #F48FB1 0%, #F8BBD9 100%)",color:"#880E4F",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"}},children:[e.jsx(s,{sx:{position:"absolute",top:0,right:0,width:100,height:100,background:"rgba(255,255,255,0.3)",borderRadius:"50%",transform:"translate(30px, -30px)"}}),e.jsxs(Ce,{sx:{flexGrow:1,position:"relative",zIndex:1},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(ve,{sx:{bgcolor:"rgba(136, 14, 79, 0.2)",mr:2,width:40,height:40,color:"#880E4F"},children:e.jsx(R,{})}),e.jsxs(s,{children:[e.jsx(h,{variant:"h6",sx:{fontWeight:"bold",mb:.5,color:"#880E4F"},children:a.languageName}),e.jsxs(s,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(U,{label:a.languageCode,size:"small",sx:{bgcolor:"rgba(136, 14, 79, 0.2)",color:"#880E4F",fontWeight:"bold",fontSize:"0.7rem"}}),e.jsx(U,{label:a.isActive,size:"small",sx:{bgcolor:a.isActive==="Active"?"rgba(76, 175, 80, 0.9)":"rgba(244, 67, 54, 0.9)",color:"white",fontWeight:"bold"}})]})]})]}),e.jsx(h,{variant:"body2",sx:{mb:2,opacity:.8,color:"#880E4F",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:a.languageDescription}),e.jsx(ye,{sx:{my:1,bgcolor:"rgba(136, 14, 79, 0.2)"}}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(h,{variant:"caption",sx:{opacity:.7,color:"#880E4F"},children:["ID: ",a.languageId]}),e.jsx(h,{variant:"caption",sx:{opacity:.7,color:"#880E4F"},children:a.insertedDate})]}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{variant:"caption",sx:{opacity:.7,color:"#880E4F"},children:["Updated: ",a.updatedDate]}),e.jsxs(s,{children:[e.jsx(w,{size:"small",onClick:()=>W(a.languageId),sx:{color:"#880E4F","&:hover":{bgcolor:"rgba(136, 14, 79, 0.1)"}},children:e.jsx(V,{fontSize:"small"})}),e.jsx(w,{size:"small",onClick:()=>$(a.languageId),sx:{color:"#880E4F","&:hover":{bgcolor:"rgba(136, 14, 79, 0.1)"}},children:e.jsx(G,{fontSize:"small"})})]})]})]})]})},a.languageId))}),oe=()=>e.jsxs(we,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(Se,{sx:{maxHeight:440},children:e.jsxs(De,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(Ee,{children:e.jsx(A,{children:L.map(a=>e.jsx(I,{align:a.align,style:{minWidth:a.minWidth,fontWeight:600,fontSize:15},children:a.label},a.id))})}),e.jsx(Ae,{children:x.length===0?e.jsx(A,{children:e.jsx(I,{colSpan:L.length,align:"center",children:e.jsxs(s,{sx:{py:2},children:[e.jsx("div",{children:"No communication languages found"}),e.jsxs("div",{style:{fontSize:"12px",color:"gray"},children:["Languages array length: ",x.length]})]})})}):x.map(a=>e.jsx(A,{hover:!0,role:"checkbox",tabIndex:-1,children:L.map(t=>e.jsx(I,{align:t.align,children:t.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(w,{onClick:()=>W(a.languageId),style:{color:"#00afb5"},children:e.jsx(V,{})}),e.jsx(w,{onClick:()=>$(a.languageId),color:"error",children:e.jsx(G,{})})]}):t.id==="isActive"?e.jsx(s,{sx:{backgroundColor:a[t.id]==="Active"?"#4caf50":"#f44336",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:a[t.id]}):t.id==="languageCode"?e.jsx(s,{sx:{backgroundColor:"#e3f2fd",color:"#1976d2",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:a[t.id]}):a[t.id]},t.id))},a.languageId))})]})}),e.jsx(Ie,{rowsPerPageOptions:[10,25,100],component:"div",count:P,rowsPerPage:n,page:o,onPageChange:Q,onRowsPerPageChange:Z})]});return e.jsxs(s,{sx:{mt:4},children:[e.jsxs(Le,{title:e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx("span",{children:"Communication Language Management"}),e.jsx(de,{badgeContent:P,color:"primary",children:e.jsx(R,{color:"action"})})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(ge,{value:N,exclusive:!0,onChange:ee,size:"small",sx:{bgcolor:"background.paper"},children:[e.jsx(M,{value:"list","aria-label":"list view",children:e.jsx(ue,{})}),e.jsx(M,{value:"card","aria-label":"card view",children:e.jsx(he,{})})]}),e.jsxs(E,{variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},sx:{display:"flex",alignItems:"center",fontSize:"15px"},onClick:re,children:["Add Language",e.jsx(ke,{sx:{color:"#fff"}})]})]})]}),children:[e.jsx(u,{container:!0,spacing:Te}),N==="card"?se():oe()]}),e.jsxs(xe,{open:J,onClose:()=>m(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(me,{sx:{fontWeight:"bold",fontSize:"1.25rem",backgroundColor:"#f5f5f5"},children:S?"Edit Communication Language":"Add Communication Language"}),e.jsxs(s,{component:"form",onSubmit:te,noValidate:!0,sx:{p:3},children:[e.jsxs(u,{container:!0,spacing:2,children:[e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(O,{fullWidth:!0,label:"Language Name",name:"languageName",value:i.languageName,onChange:D,error:!!f.languageName,helperText:f.languageName,placeholder:"e.g., English, Spanish, French"})}),e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(O,{fullWidth:!0,label:"Language Code",name:"languageCode",value:i.languageCode,onChange:D,error:!!f.languageCode,helperText:f.languageCode,placeholder:"e.g., en, es, fr",inputProps:{style:{textTransform:"lowercase"}}})}),e.jsx(u,{item:!0,xs:12,children:e.jsx(fe,{control:e.jsx(pe,{checked:i.isActive,onChange:D,name:"isActive",color:"primary"}),label:"Active Status"})})]}),e.jsxs(be,{children:[e.jsx(E,{type:"submit",variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},children:S?"Update":"Add"}),e.jsx(E,{onClick:()=>m(!1),style:{color:"#00afb5"},children:"Cancel"})]})]})]})]})};export{Ue as default};
