import{j as e,a as m,d as c,P as x}from"./mui-DJAgGlcD.js";import{r as n}from"./react-CeAUEJ0P.js";import{M as j,B as g,g as u}from"./index-BvpLlJd4.js";import{a as w}from"./vendor-BhB35ZXg.js";import{j as y}from"./carousel.min-h4a26kmx.js";const v=({filePath:r})=>{const[t,h]=n.useState(""),s=JSON.parse(sessionStorage.getItem("user"));return n.useEffect(()=>r?((async()=>{try{const a=await w.get(`${g}/file/downloadFile/?filePath=${encodeURIComponent(r)}`,{headers:{Authorization:`Bearer ${s==null?void 0:s.accessToken}`},responseType:"blob"}),o=new Blob([a.data],{type:a.headers["content-type"]}),i=URL.createObjectURL(o);h(i)}catch(a){console.error("Error fetching image:",a),h("")}})(),()=>{t&&URL.revokeObjectURL(t)}):void 0,[r,s==null?void 0:s.accessToken]),t?e.jsx("img",{src:t,style:{width:"100%",height:"100%",objectFit:"cover"},alt:"Advertisement"}):"Loading..."},b=async r=>{try{const t=await fetch(`${g}/advertisement/v1/queryAllAdvertisement`,{method:"GET",headers:r});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return await t.json()}catch(t){return console.error("Error fetching banner data:",t),[]}},f=()=>{const[r,t]=n.useState([]),[h,s]=n.useState(!0),l=JSON.parse(sessionStorage.getItem("user")),a={"Content-Type":"application/json",Authorization:`Bearer ${l==null?void 0:l.accessToken}`};return n.useEffect(()=>{(async()=>{s(!0);try{const i=await b(a);if(i.length>0){const p=i.map(d=>({advertisementId:d.advertisementId,filePath:d.filePath||null}));t(p)}else t([])}catch(i){console.error("Error fetching data:",i)}finally{s(!1)}})()},[]),e.jsx(j,{border:!1,content:!1,sx:{mt:4,width:"100%",height:450},children:e.jsx(m,{sx:{width:"100%",height:"100%"},children:e.jsx(c,{container:!0,direction:"column",sx:{width:"100%",height:"100%"},children:e.jsx(c,{item:!0,xs:12,sx:{width:"100%",height:"100%"},children:h?e.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading..."}):e.jsx(y.Carousel,{showThumbs:!1,showArrows:!0,showIndicators:!0,showStatus:!1,infiniteLoop:!0,autoPlay:!0,interval:3e3,transitionTime:500,stopOnHover:!0,dynamicHeight:!1,swipeable:!0,emulateTouch:!0,style:{width:"100%",height:450},children:r.length>0?r.map(o=>o.filePath?e.jsx("div",{style:{width:"100%",height:450},children:e.jsx(v,{filePath:o.filePath})},o.advertisementId):null):e.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"No Data"})})})})})})};f.propTypes={isLoading:x.bool};const I=()=>{const[r,t]=n.useState(!0);return n.useEffect(()=>{t(!1)},[]),e.jsx(m,{sx:{mt:4},children:e.jsx(c,{container:!0,spacing:u,children:e.jsx(c,{item:!0,xs:12,children:e.jsx(c,{container:!0,spacing:u,children:e.jsx(c,{item:!0,lg:12,md:12,sm:12,xs:12,children:e.jsx(f,{isLoading:r})})})})})})};export{I as default};
