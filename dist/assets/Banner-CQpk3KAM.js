import{j as t,a as u,d as p,P as g}from"./mui-BHd6aP3D.js";import{r as o}from"./react-CeAUEJ0P.js";import{a as x}from"./vendor-BhB35ZXg.js";import{M as y,B as j}from"./index-CqEkO1RD.js";import{j as w}from"./carousel.min-CSLkq13g.js";import{f as b}from"./BannerApi-DX5RZjMm.js";const v=({filePath:a})=>{const[r,n]=o.useState(""),s=JSON.parse(sessionStorage.getItem("user"));return o.useEffect(()=>a?((async()=>{var c;try{const e=await x.get(`${j}/bookmystarsadmin/file/downloadFile/?filePath=${encodeURIComponent(a)}`,{headers:{Authorization:`Bearer ${s==null?void 0:s.accessToken}`},responseType:"blob"}),h=new Blob([e.data],{type:e.headers["content-type"]}),l=URL.createObjectURL(h);n(l)}catch(e){console.error("Error fetching image:",e),((c=e.response)==null?void 0:c.status)===404&&console.warn(`Image not found: ${a}`),n("")}})(),()=>{r&&URL.revokeObjectURL(r)}):void 0,[a,s==null?void 0:s.accessToken]),r?t.jsx("img",{src:r,style:{width:"100%",height:"100%",objectFit:"cover"},alt:"Advertisement"}):"Loading..."},I=()=>{const[a,r]=o.useState([]),[n,s]=o.useState(!0),i=JSON.parse(sessionStorage.getItem("user")),c={"Content-Type":"application/json",Authorization:`Bearer ${i==null?void 0:i.accessToken}`};return o.useEffect(()=>{(async()=>{s(!0);try{const d=(await b(0,10,c)).data.content||[];if(d.length>0){const f=d.map(m=>({advertisementId:m.advertisementId,filePath:m.filePath||null}));r(f)}else r([])}catch(h){console.error("Error fetching data:",h),r([])}finally{s(!1)}})()},[]),t.jsx(y,{border:!1,content:!1,sx:{mt:4,width:"100%",height:450},children:t.jsx(u,{sx:{width:"100%",height:"100%"},children:t.jsx(p,{container:!0,direction:"column",sx:{width:"100%",height:"100%"},children:t.jsx(p,{item:!0,xs:12,sx:{width:"100%",height:"100%"},children:n?t.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading..."}):t.jsx(w.Carousel,{showThumbs:!1,showArrows:!0,showIndicators:!0,showStatus:!1,infiniteLoop:!0,autoPlay:!0,interval:3e3,transitionTime:500,stopOnHover:!0,dynamicHeight:!1,swipeable:!0,emulateTouch:!0,style:{width:"100%",height:450},children:a.length>0?a.map(e=>e.filePath?t.jsx("div",{style:{width:"100%",height:450},children:t.jsx(v,{filePath:e.filePath})},e.advertisementId):null):t.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"No Data"})})})})})})};I.propTypes={isLoading:g.bool};export{I as default};
