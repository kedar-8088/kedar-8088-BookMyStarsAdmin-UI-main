import{u as ce,j as e,a as o,d as h,ap as le,aF as O,ar as de,as as R,at as pe,au as he,n as S,am as xe,an as je,t as U,Y as ye,av as ge,ao as ue,T as x,c as me,f as fe,A as be,h as Te,D as ve,X as D,aj as L,ak as V,r as De,ad as we,ae as Ce,af as Se,ag as A,ah as P,ai as Ae,al as Pe}from"./mui-DJAgGlcD.js";import{r as d}from"./react-CeAUEJ0P.js";import{B as b,S as n,M as Ee,g as Ie}from"./index-BvpLlJd4.js";import{a as T}from"./vendor-BhB35ZXg.js";import{d as ke,h as G}from"./Add-DIF5rR4-.js";const Ne=async(i,c=0,a=10)=>await T({method:"get",url:`${b}/v1/projecttype/list?pageNumber=${c}&pageSize=${a}`,headers:i}),Fe=async(i,c)=>{try{const a=await T({method:"POST",url:`${b}/v1/projecttype/create`,headers:c,data:i});a.data.code===200?n.fire("Success",a.data.message,"success"):a.data.code===400&&n.fire("Error",a.data.error,"error")}catch(a){n.fire("Error",a.message,"error")}},Be=async(i,c)=>await T({method:"delete",url:`${b}/v1/projecttype/${i}`,headers:c}).then(a=>{a.data.code===200?n.fire("Deleted!",a.data.message,"success"):a.data.code===400&&n.fire("Error",a.data.error,"error")}).catch(a=>{n.fire("Error",a.message,"error")}),We=async(i,c)=>await T({method:"GET",url:`${b}/v1/projecttype/${i}`,headers:c}),ze=async(i,c)=>await T({method:"PUT",url:`${b}/v1/projecttype/update/${i.projectTypeId}`,headers:c,data:i}).then(a=>{a.data.code===200?n.fire("Success",a.data.message,"success"):a.data.code===400&&n.fire("Error",a.data.error,"error")}).catch(a=>{n.fire("Error",a.message,"error")}),E=[{id:"projectTypeId",label:"ID"},{id:"projectTypeName",label:"Project Type Name",minWidth:150},{id:"projectTypeDescription",label:"Description",minWidth:200},{id:"isActive",label:"Status",align:"center"},{id:"insertedDate",label:"Created Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],Le=()=>{ce();const[i,c]=d.useState(0),[a,H]=d.useState(10),[j,I]=d.useState([]),[Y,y]=d.useState(!1),[w,k]=d.useState(!1),[N,J]=d.useState("list"),[l,v]=d.useState({projectTypeName:"",projectTypeDescription:"",isActive:!0}),[g,F]=d.useState({}),[X,B]=d.useState(!1),[_,q]=d.useState(null),[W,z]=d.useState(0),K=(t,r)=>{c(r)},Q=t=>{H(+t.target.value),c(0)},Z=(t,r)=>{r!==null&&J(r)},u=JSON.parse(sessionStorage.getItem("user")),m={"Content-Type":"application/json",Authorization:"Bearer "+(u==null?void 0:u.accessToken)},ee=async()=>{var t,r;try{if(!u||!u.accessToken){console.error("User not authenticated"),n.fire("Error","Please login to continue","error");return}const s=await Ne(m,i,a),f=((t=s.data.data)==null?void 0:t.content)||[],ie=((r=s.data.data)==null?void 0:r.totalElements)||0;if(f&&Array.isArray(f)){const ne=f.map(p=>({projectTypeId:p.projectTypeId,projectTypeName:p.projectTypeName,projectTypeDescription:p.projectTypeDescription,isActive:p.isActive?"Active":"Inactive",insertedDate:p.insertedDate?G(p.insertedDate).format("L"):"N/A",updatedDate:p.updatedDate?G(p.updatedDate).format("L"):"N/A"}));I(ne),z(ie)}else I([]),z(0)}catch(s){console.error("Error fetching data:",s)}};d.useEffect(()=>{ee()},[X,i,a]);const te=async t=>{t.preventDefault();const r=re();if(Object.keys(r).length>0)F(r);else try{if(w){const s={projectTypeId:_,projectTypeName:l.projectTypeName,projectTypeDescription:l.projectTypeDescription,isActive:l.isActive};await ze(s,m)}else{const s={...l,insertedDate:new Date().toISOString(),updatedDate:new Date().toISOString()};await Fe(s,m)}v({projectTypeName:"",projectTypeDescription:"",isActive:!0}),B(s=>!s),y(!1)}catch(s){console.error("Error saving project type:",s)}},re=()=>{const t={};return(!l.projectTypeName||l.projectTypeName.trim()==="")&&(t.projectTypeName="Enter the project type name"),(!l.projectTypeDescription||l.projectTypeDescription.trim()==="")&&(t.projectTypeDescription="Enter the project type description"),t},C=t=>{const{name:r,value:s,checked:f}=t.target;v({...l,[r]:r==="isActive"?f:s}),F({...g,[r]:null})},ae=()=>{k(!1),v({projectTypeName:"",projectTypeDescription:"",isActive:!0}),y(!0)},$=async t=>{k(!0),y(!0);try{const r=await We(t,m),s=r.data.data||r.data;q(s.projectTypeId),v({projectTypeName:s.projectTypeName,projectTypeDescription:s.projectTypeDescription,isActive:s.isActive})}catch(r){console.error("Error fetching project type details:",r)}},M=async t=>{n.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async r=>{if(r.isConfirmed)try{await Be(t,m),B(s=>!s),n.fire({title:"Deleted!",text:"Project type has been deleted.",icon:"success"})}catch(s){n.fire({title:"Error!",text:"There was a problem deleting the project type.",icon:"error"}),console.error("Error deleting project type:",s)}})},se=()=>e.jsx(h,{container:!0,spacing:3,children:j.length===0?e.jsx(h,{item:!0,xs:12,children:e.jsxs(o,{sx:{textAlign:"center",py:4},children:[e.jsx(x,{variant:"h6",color:"textSecondary",children:"No project types found"}),e.jsxs(x,{variant:"body2",color:"textSecondary",children:["Project types array length: ",j.length]})]})}):j.map(t=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(me,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #F48FB1 0%, #F8BBD9 100%)",color:"#880E4F",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"}},children:[e.jsx(o,{sx:{position:"absolute",top:0,right:0,width:100,height:100,background:"rgba(255,255,255,0.3)",borderRadius:"50%",transform:"translate(30px, -30px)"}}),e.jsxs(fe,{sx:{flexGrow:1,position:"relative",zIndex:1},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(be,{sx:{bgcolor:"rgba(136, 14, 79, 0.2)",mr:2,width:40,height:40,color:"#880E4F"},children:e.jsx(O,{})}),e.jsxs(o,{children:[e.jsx(x,{variant:"h6",sx:{fontWeight:"bold",mb:.5,color:"#880E4F"},children:t.projectTypeName}),e.jsx(Te,{label:t.isActive,size:"small",sx:{bgcolor:t.isActive==="Active"?"rgba(76, 175, 80, 0.9)":"rgba(244, 67, 54, 0.9)",color:"white",fontWeight:"bold"}})]})]}),e.jsx(x,{variant:"body2",sx:{mb:2,opacity:.8,color:"#880E4F",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.projectTypeDescription}),e.jsx(ve,{sx:{my:1,bgcolor:"rgba(136, 14, 79, 0.2)"}}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(x,{variant:"caption",sx:{opacity:.7,color:"#880E4F"},children:["ID: ",t.projectTypeId]}),e.jsx(x,{variant:"caption",sx:{opacity:.7,color:"#880E4F"},children:t.insertedDate})]}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(x,{variant:"caption",sx:{opacity:.7,color:"#880E4F"},children:["Updated: ",t.updatedDate]}),e.jsxs(o,{children:[e.jsx(D,{size:"small",onClick:()=>$(t.projectTypeId),sx:{color:"#880E4F","&:hover":{bgcolor:"rgba(136, 14, 79, 0.1)"}},children:e.jsx(L,{fontSize:"small"})}),e.jsx(D,{size:"small",onClick:()=>M(t.projectTypeId),sx:{color:"#880E4F","&:hover":{bgcolor:"rgba(136, 14, 79, 0.1)"}},children:e.jsx(V,{fontSize:"small"})})]})]})]})]})},t.projectTypeId))}),oe=()=>e.jsxs(De,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(we,{sx:{maxHeight:440},children:e.jsxs(Ce,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(Se,{children:e.jsx(A,{children:E.map(t=>e.jsx(P,{align:t.align,style:{minWidth:t.minWidth,fontWeight:600,fontSize:15},children:t.label},t.id))})}),e.jsx(Ae,{children:j.length===0?e.jsx(A,{children:e.jsx(P,{colSpan:E.length,align:"center",children:e.jsxs(o,{sx:{py:2},children:[e.jsx("div",{children:"No project types found"}),e.jsxs("div",{style:{fontSize:"12px",color:"gray"},children:["Project types array length: ",j.length]})]})})}):j.map(t=>e.jsx(A,{hover:!0,role:"checkbox",tabIndex:-1,children:E.map(r=>e.jsx(P,{align:r.align,children:r.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(D,{onClick:()=>$(t.projectTypeId),style:{color:"#00afb5"},children:e.jsx(L,{})}),e.jsx(D,{onClick:()=>M(t.projectTypeId),color:"error",children:e.jsx(V,{})})]}):r.id==="isActive"?e.jsx(o,{sx:{backgroundColor:t[r.id]==="Active"?"#4caf50":"#f44336",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:t[r.id]}):r.id==="projectTypeDescription"?e.jsx(o,{sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t[r.id]}):t[r.id]},r.id))},t.projectTypeId))})]})}),e.jsx(Pe,{rowsPerPageOptions:[10,25,100],component:"div",count:W,rowsPerPage:a,page:i,onPageChange:K,onRowsPerPageChange:Q})]});return e.jsxs(o,{sx:{mt:4},children:[e.jsxs(Ee,{title:e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx("span",{children:"Project Type Management"}),e.jsx(le,{badgeContent:W,color:"primary",children:e.jsx(O,{color:"action"})})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(de,{value:N,exclusive:!0,onChange:Z,size:"small",sx:{bgcolor:"background.paper"},children:[e.jsx(R,{value:"list","aria-label":"list view",children:e.jsx(pe,{})}),e.jsx(R,{value:"card","aria-label":"card view",children:e.jsx(he,{})})]}),e.jsxs(S,{variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},sx:{display:"flex",alignItems:"center",fontSize:"15px"},onClick:ae,children:["Add Project Type",e.jsx(ke,{sx:{color:"#fff"}})]})]})]}),children:[e.jsx(h,{container:!0,spacing:Ie}),N==="card"?se():oe()]}),e.jsxs(xe,{open:Y,onClose:()=>y(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(je,{sx:{fontWeight:"bold",fontSize:"1.25rem",backgroundColor:"#f5f5f5"},children:w?"Edit Project Type":"Add Project Type"}),e.jsxs(o,{component:"form",onSubmit:te,noValidate:!0,sx:{p:3},children:[e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(U,{fullWidth:!0,label:"Project Type Name",name:"projectTypeName",value:l.projectTypeName,onChange:C,error:!!g.projectTypeName,helperText:g.projectTypeName,placeholder:"e.g., Web Development, Mobile App"})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(U,{fullWidth:!0,label:"Project Type Description",name:"projectTypeDescription",value:l.projectTypeDescription,onChange:C,error:!!g.projectTypeDescription,helperText:g.projectTypeDescription,placeholder:"Describe the project type and its characteristics",multiline:!0,rows:4})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(ye,{control:e.jsx(ge,{checked:l.isActive,onChange:C,name:"isActive",color:"primary"}),label:"Active Status"})})]}),e.jsxs(ue,{children:[e.jsx(S,{type:"submit",variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},children:w?"Update":"Add"}),e.jsx(S,{onClick:()=>y(!1),style:{color:"#00afb5"},children:"Cancel"})]})]})]})]})};export{Le as default};
