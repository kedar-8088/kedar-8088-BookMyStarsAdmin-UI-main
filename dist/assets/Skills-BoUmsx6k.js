import{u as he,j as e,a,d as x,ap as xe,aG as $,ar as ge,as as M,at as ue,au as pe,n as C,am as ke,an as me,t as O,U as fe,V as ve,ay as be,az as V,Y as je,av as Se,ao as ye,T as u,c as De,f as we,A as Ce,h as G,D as Ae,X as D,aj as H,ak as Y,r as Ee,ad as Ie,ae as Le,af as Te,ag as A,ah as E,ai as Ne,al as Be}from"./mui-DJAgGlcD.js";import{r as d}from"./react-CeAUEJ0P.js";import{B as b,S as o,M as Fe,g as Pe}from"./index-BvpLlJd4.js";import{a as j}from"./vendor-BhB35ZXg.js";import{d as We,h as X}from"./Add-DIF5rR4-.js";const ze=async(n,c=0,t=10)=>await j({method:"get",url:`${b}/v1/skills/list?pageNumber=${c}&pageSize=${t}`,headers:n}),Re=async(n,c)=>{try{const t=await j({method:"POST",url:`${b}/v1/skills/create`,headers:c,data:n});t.data.code===200?o.fire("Success",t.data.message,"success"):t.data.code===400&&o.fire("Error",t.data.error,"error")}catch(t){o.fire("Error",t.message,"error")}},Ue=async(n,c)=>await j({method:"delete",url:`${b}/v1/skills/${n}`,headers:c}).then(t=>{t.data.code===200?o.fire("Deleted!",t.data.message,"success"):t.data.code===400&&o.fire("Error",t.data.error,"error")}).catch(t=>{o.fire("Error",t.message,"error")}),$e=async(n,c)=>await j({method:"GET",url:`${b}/v1/skills/${n}`,headers:c}),Me=async(n,c)=>await j({method:"PUT",url:`${b}/v1/skills/update/${n.skillId}`,headers:c,data:n}).then(t=>{t.data.code===200?o.fire("Success",t.data.message,"success"):t.data.code===400&&o.fire("Error",t.data.error,"error")}).catch(t=>{o.fire("Error",t.message,"error")}),I=[{id:"skillId",label:"ID"},{id:"skillName",label:"Skill Name",minWidth:150},{id:"skillDescription",label:"Description",minWidth:200},{id:"skillLevel",label:"Skill Level",minWidth:120},{id:"isActive",label:"Status",align:"center"},{id:"insertedDate",label:"Created Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],Oe=[{value:"Beginner",label:"Beginner"},{value:"Intermediate",label:"Intermediate"},{value:"Advanced",label:"Advanced"},{value:"Expert",label:"Expert"}],Je=()=>{he();const[n,c]=d.useState(0),[t,J]=d.useState(10),[p,L]=d.useState([]),[_,k]=d.useState(!1),[w,T]=d.useState(!1),[N,q]=d.useState("list"),[r,S]=d.useState({skillName:"",skillDescription:"",skillLevel:"",isActive:!0}),[g,B]=d.useState({}),[K,F]=d.useState(!1),[Q,Z]=d.useState(null),[P,W]=d.useState(0),ee=(l,s)=>{c(s)},le=l=>{J(+l.target.value),c(0)},se=(l,s)=>{s!==null&&q(s)},m=JSON.parse(sessionStorage.getItem("user")),f={"Content-Type":"application/json",Authorization:"Bearer "+(m==null?void 0:m.accessToken)},te=async()=>{var l,s;try{if(!m||!m.accessToken){console.error("User not authenticated"),o.fire("Error","Please login to continue","error");return}const i=await ze(f,n,t),v=((l=i.data.data)==null?void 0:l.content)||[],ce=((s=i.data.data)==null?void 0:s.totalElements)||0;if(v&&Array.isArray(v)){const de=v.map(h=>({skillId:h.skillId,skillName:h.skillName,skillDescription:h.skillDescription,skillLevel:h.skillLevel,isActive:h.isActive?"Active":"Inactive",insertedDate:h.insertedDate?X(h.insertedDate).format("L"):"N/A",updatedDate:h.updatedDate?X(h.updatedDate).format("L"):"N/A"}));L(de),W(ce)}else L([]),W(0)}catch(i){console.error("Error fetching data:",i)}};d.useEffect(()=>{te()},[K,n,t]);const ie=async l=>{l.preventDefault();const s=ae();if(Object.keys(s).length>0)B(s);else try{if(w){const i={skillId:Q,skillName:r.skillName,skillDescription:r.skillDescription,skillLevel:r.skillLevel,isActive:r.isActive};await Me(i,f)}else{const i={...r,insertedDate:new Date().toISOString(),updatedDate:new Date().toISOString()};await Re(i,f)}S({skillName:"",skillDescription:"",skillLevel:"",isActive:!0}),F(i=>!i),k(!1)}catch(i){console.error("Error saving skill:",i)}},ae=()=>{const l={};return(!r.skillName||r.skillName.trim()==="")&&(l.skillName="Enter the skill name"),(!r.skillDescription||r.skillDescription.trim()==="")&&(l.skillDescription="Enter the skill description"),(!r.skillLevel||r.skillLevel==="")&&(l.skillLevel="Select a skill level"),l},y=l=>{const{name:s,value:i,checked:v}=l.target;S({...r,[s]:s==="isActive"?v:i}),B({...g,[s]:null})},re=()=>{T(!1),S({skillName:"",skillDescription:"",skillLevel:"",isActive:!0}),k(!0)},z=async l=>{T(!0),k(!0);try{const s=await $e(l,f),i=s.data.data||s.data;Z(i.skillId),S({skillName:i.skillName,skillDescription:i.skillDescription,skillLevel:i.skillLevel,isActive:i.isActive})}catch(s){console.error("Error fetching skill details:",s)}},R=async l=>{o.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async s=>{if(s.isConfirmed)try{await Ue(l,f),F(i=>!i),o.fire({title:"Deleted!",text:"Skill has been deleted.",icon:"success"})}catch(i){o.fire({title:"Error!",text:"There was a problem deleting the skill.",icon:"error"}),console.error("Error deleting skill:",i)}})},U=l=>{switch(l){case"Beginner":return"rgba(76, 175, 80, 0.8)";case"Intermediate":return"rgba(33, 150, 243, 0.8)";case"Advanced":return"rgba(255, 152, 0, 0.8)";case"Expert":return"rgba(156, 39, 176, 0.8)";default:return"rgba(158, 158, 158, 0.8)"}},ne=()=>e.jsx(x,{container:!0,spacing:3,children:p.length===0?e.jsx(x,{item:!0,xs:12,children:e.jsxs(a,{sx:{textAlign:"center",py:4},children:[e.jsx(u,{variant:"h6",color:"textSecondary",children:"No skills found"}),e.jsxs(u,{variant:"body2",color:"textSecondary",children:["Skills array length: ",p.length]})]})}):p.map(l=>e.jsx(x,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(De,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #F48FB1 0%, #F8BBD9 100%)",color:"#880E4F",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"}},children:[e.jsx(a,{sx:{position:"absolute",top:0,right:0,width:100,height:100,background:"rgba(255,255,255,0.3)",borderRadius:"50%",transform:"translate(30px, -30px)"}}),e.jsxs(we,{sx:{flexGrow:1,position:"relative",zIndex:1},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ce,{sx:{bgcolor:"rgba(136, 14, 79, 0.2)",mr:2,width:40,height:40,color:"#880E4F"},children:e.jsx($,{})}),e.jsxs(a,{children:[e.jsx(u,{variant:"h6",sx:{fontWeight:"bold",mb:.5,color:"#880E4F"},children:l.skillName}),e.jsxs(a,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(G,{label:l.isActive,size:"small",sx:{bgcolor:l.isActive==="Active"?"rgba(76, 175, 80, 0.9)":"rgba(244, 67, 54, 0.9)",color:"white",fontWeight:"bold"}}),e.jsx(G,{label:l.skillLevel,size:"small",sx:{bgcolor:U(l.skillLevel),color:"white",fontWeight:"bold",fontSize:"0.7rem"}})]})]})]}),e.jsx(u,{variant:"body2",sx:{mb:2,opacity:.8,color:"#880E4F",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:l.skillDescription}),e.jsx(Ae,{sx:{my:1,bgcolor:"rgba(136, 14, 79, 0.2)"}}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(u,{variant:"caption",sx:{opacity:.7,color:"#880E4F"},children:["ID: ",l.skillId]}),e.jsx(u,{variant:"caption",sx:{opacity:.7,color:"#880E4F"},children:l.insertedDate})]}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(u,{variant:"caption",sx:{opacity:.7,color:"#880E4F"},children:["Updated: ",l.updatedDate]}),e.jsxs(a,{children:[e.jsx(D,{size:"small",onClick:()=>z(l.skillId),sx:{color:"#880E4F","&:hover":{bgcolor:"rgba(136, 14, 79, 0.1)"}},children:e.jsx(H,{fontSize:"small"})}),e.jsx(D,{size:"small",onClick:()=>R(l.skillId),sx:{color:"#880E4F","&:hover":{bgcolor:"rgba(136, 14, 79, 0.1)"}},children:e.jsx(Y,{fontSize:"small"})})]})]})]})]})},l.skillId))}),oe=()=>e.jsxs(Ee,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(Ie,{sx:{maxHeight:440},children:e.jsxs(Le,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(Te,{children:e.jsx(A,{children:I.map(l=>e.jsx(E,{align:l.align,style:{minWidth:l.minWidth,fontWeight:600,fontSize:15},children:l.label},l.id))})}),e.jsx(Ne,{children:p.length===0?e.jsx(A,{children:e.jsx(E,{colSpan:I.length,align:"center",children:e.jsxs(a,{sx:{py:2},children:[e.jsx("div",{children:"No skills found"}),e.jsxs("div",{style:{fontSize:"12px",color:"gray"},children:["Skills array length: ",p.length]})]})})}):p.map(l=>e.jsx(A,{hover:!0,role:"checkbox",tabIndex:-1,children:I.map(s=>e.jsx(E,{align:s.align,children:s.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(D,{onClick:()=>z(l.skillId),style:{color:"#00afb5"},children:e.jsx(H,{})}),e.jsx(D,{onClick:()=>R(l.skillId),color:"error",children:e.jsx(Y,{})})]}):s.id==="isActive"?e.jsx(a,{sx:{backgroundColor:l[s.id]==="Active"?"#4caf50":"#f44336",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:l[s.id]}):s.id==="skillLevel"?e.jsx(a,{sx:{backgroundColor:U(l[s.id]),color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:l[s.id]}):s.id==="skillDescription"?e.jsx(a,{sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l[s.id]}):l[s.id]},s.id))},l.skillId))})]})}),e.jsx(Be,{rowsPerPageOptions:[10,25,100],component:"div",count:P,rowsPerPage:t,page:n,onPageChange:ee,onRowsPerPageChange:le})]});return e.jsxs(a,{sx:{mt:4},children:[e.jsxs(Fe,{title:e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx("span",{children:"Skills Management"}),e.jsx(xe,{badgeContent:P,color:"primary",children:e.jsx($,{color:"action"})})]}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(ge,{value:N,exclusive:!0,onChange:se,size:"small",sx:{bgcolor:"background.paper"},children:[e.jsx(M,{value:"list","aria-label":"list view",children:e.jsx(ue,{})}),e.jsx(M,{value:"card","aria-label":"card view",children:e.jsx(pe,{})})]}),e.jsxs(C,{variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},sx:{display:"flex",alignItems:"center",fontSize:"15px"},onClick:re,children:["Add Skill",e.jsx(We,{sx:{color:"#fff"}})]})]})]}),children:[e.jsx(x,{container:!0,spacing:Pe}),N==="card"?ne():oe()]}),e.jsxs(ke,{open:_,onClose:()=>k(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(me,{sx:{fontWeight:"bold",fontSize:"1.25rem",backgroundColor:"#f5f5f5"},children:w?"Edit Skill":"Add Skill"}),e.jsxs(a,{component:"form",onSubmit:ie,noValidate:!0,sx:{p:3},children:[e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:12,md:6,children:e.jsx(O,{fullWidth:!0,label:"Skill Name",name:"skillName",value:r.skillName,onChange:y,error:!!g.skillName,helperText:g.skillName,placeholder:"e.g., React.js, Python, UI/UX Design"})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(fe,{fullWidth:!0,error:!!g.skillLevel,children:[e.jsx(ve,{children:"Skill Level"}),e.jsxs(be,{name:"skillLevel",value:r.skillLevel,onChange:y,label:"Skill Level",children:[e.jsx(V,{value:"",children:e.jsx("em",{children:"Select skill level"})}),Oe.map(l=>e.jsx(V,{value:l.value,children:l.label},l.value))]}),g.skillLevel&&e.jsx(a,{sx:{color:"error.main",fontSize:"0.75rem",mt:.5},children:g.skillLevel})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(O,{fullWidth:!0,label:"Skill Description",name:"skillDescription",value:r.skillDescription,onChange:y,error:!!g.skillDescription,helperText:g.skillDescription,placeholder:"Describe the skill and its applications",multiline:!0,rows:4})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(je,{control:e.jsx(Se,{checked:r.isActive,onChange:y,name:"isActive",color:"primary"}),label:"Active Status"})})]}),e.jsxs(ye,{children:[e.jsx(C,{type:"submit",variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},children:w?"Update":"Add"}),e.jsx(C,{onClick:()=>k(!1),style:{color:"#00afb5"},children:"Cancel"})]})]})]})]})};export{Je as default};
