import{u as xe,j as e,a as s,d as h,ap as he,aE as M,ar as be,as as U,at as pe,au as ge,n as C,am as je,an as ue,t as $,U as me,V as fe,ay as ve,az as O,Y as ye,av as Re,ao as De,T as p,c as we,f as Se,A as Ce,h as V,D as Ee,X as w,aj as G,ak as H,r as Le,ad as Ae,ae as Ie,af as ke,ag as E,ah as L,ai as Te,al as Ne}from"./mui-DJAgGlcD.js";import{r as d}from"./react-CeAUEJ0P.js";import{B as v,S as n,M as Fe,g as We}from"./index-BvpLlJd4.js";import{a as y}from"./vendor-BhB35ZXg.js";import{d as Je,h as Y}from"./Add-DIF5rR4-.js";const ze=async(l,c=0,a=10)=>await y({method:"get",url:`${v}/v1/jobrole/list?pageNumber=${c}&pageSize=${a}`,headers:l}),Be=async(l,c)=>{try{const a=await y({method:"POST",url:`${v}/v1/jobrole/create`,headers:c,data:l});a.data.code===200?n.fire("Success",a.data.message,"success"):a.data.code===400&&n.fire("Error",a.data.error,"error")}catch(a){n.fire("Error",a.message,"error")}},Pe=async(l,c)=>await y({method:"delete",url:`${v}/v1/jobrole/${l}`,headers:c}).then(a=>{a.data.code===200?n.fire("Deleted!",a.data.message,"success"):a.data.code===400&&n.fire("Error",a.data.error,"error")}).catch(a=>{n.fire("Error",a.message,"error")}),Me=async(l,c)=>await y({method:"GET",url:`${v}/v1/jobrole/${l}`,headers:c}),Ue=async(l,c)=>await y({method:"PUT",url:`${v}/v1/jobrole/update/${l.jobRoleId}`,headers:c,data:l}).then(a=>{a.data.code===200?n.fire("Success",a.data.message,"success"):a.data.code===400&&n.fire("Error",a.data.error,"error")}).catch(a=>{n.fire("Error",a.message,"error")}),A=[{id:"jobRoleId",label:"ID"},{id:"jobRoleName",label:"Job Role Name",minWidth:150},{id:"jobRoleDescription",label:"Description",minWidth:200},{id:"experienceLevel",label:"Experience Level",minWidth:120},{id:"isActive",label:"Status",align:"center"},{id:"insertedDate",label:"Created Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],$e=[{value:"Entry",label:"Entry Level"},{value:"Mid",label:"Mid Level"},{value:"Senior",label:"Senior Level"},{value:"Lead",label:"Lead Level"},{value:"Manager",label:"Manager Level"}],Xe=()=>{xe();const[l,c]=d.useState(0),[a,X]=d.useState(10),[g,I]=d.useState([]),[q,j]=d.useState(!1),[S,k]=d.useState(!1),[T,_]=d.useState("list"),[i,R]=d.useState({jobRoleName:"",jobRoleDescription:"",experienceLevel:"",isActive:!0}),[b,N]=d.useState({}),[K,F]=d.useState(!1),[Q,Z]=d.useState(null),[W,J]=d.useState(0),ee=(r,t)=>{c(t)},re=r=>{X(+r.target.value),c(0)},te=(r,t)=>{t!==null&&_(t)},u=JSON.parse(sessionStorage.getItem("user")),m={"Content-Type":"application/json",Authorization:"Bearer "+(u==null?void 0:u.accessToken)},ae=async()=>{var r,t;try{if(!u||!u.accessToken){console.error("User not authenticated"),n.fire("Error","Please login to continue","error");return}const o=await ze(m,l,a),f=((r=o.data.data)==null?void 0:r.content)||[],ce=((t=o.data.data)==null?void 0:t.totalElements)||0;if(f&&Array.isArray(f)){const de=f.map(x=>({jobRoleId:x.jobRoleId,jobRoleName:x.jobRoleName,jobRoleDescription:x.jobRoleDescription,experienceLevel:x.experienceLevel,isActive:x.isActive?"Active":"Inactive",insertedDate:x.insertedDate?Y(x.insertedDate).format("L"):"N/A",updatedDate:x.updatedDate?Y(x.updatedDate).format("L"):"N/A"}));I(de),J(ce)}else I([]),J(0)}catch(o){console.error("Error fetching data:",o)}};d.useEffect(()=>{ae()},[K,l,a]);const oe=async r=>{r.preventDefault();const t=se();if(Object.keys(t).length>0)N(t);else try{if(S){const o={jobRoleId:Q,jobRoleName:i.jobRoleName,jobRoleDescription:i.jobRoleDescription,experienceLevel:i.experienceLevel,isActive:i.isActive};await Ue(o,m)}else{const o={...i,insertedDate:new Date().toISOString(),updatedDate:new Date().toISOString()};await Be(o,m)}R({jobRoleName:"",jobRoleDescription:"",experienceLevel:"",isActive:!0}),F(o=>!o),j(!1)}catch(o){console.error("Error saving job role:",o)}},se=()=>{const r={};return(!i.jobRoleName||i.jobRoleName.trim()==="")&&(r.jobRoleName="Enter the job role name"),(!i.jobRoleDescription||i.jobRoleDescription.trim()==="")&&(r.jobRoleDescription="Enter the job role description"),(!i.experienceLevel||i.experienceLevel==="")&&(r.experienceLevel="Select an experience level"),r},D=r=>{const{name:t,value:o,checked:f}=r.target;R({...i,[t]:t==="isActive"?f:o}),N({...b,[t]:null})},ie=()=>{k(!1),R({jobRoleName:"",jobRoleDescription:"",experienceLevel:"",isActive:!0}),j(!0)},z=async r=>{k(!0),j(!0);try{const t=await Me(r,m),o=t.data.data||t.data;Z(o.jobRoleId),R({jobRoleName:o.jobRoleName,jobRoleDescription:o.jobRoleDescription,experienceLevel:o.experienceLevel,isActive:o.isActive})}catch(t){console.error("Error fetching job role details:",t)}},B=async r=>{n.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async t=>{if(t.isConfirmed)try{await Pe(r,m),F(o=>!o),n.fire({title:"Deleted!",text:"Job role has been deleted.",icon:"success"})}catch(o){n.fire({title:"Error!",text:"There was a problem deleting the job role.",icon:"error"}),console.error("Error deleting job role:",o)}})},P=r=>{switch(r){case"Entry":return"rgba(76, 175, 80, 0.8)";case"Mid":return"rgba(33, 150, 243, 0.8)";case"Senior":return"rgba(255, 152, 0, 0.8)";case"Lead":return"rgba(156, 39, 176, 0.8)";case"Manager":return"rgba(244, 67, 54, 0.8)";default:return"rgba(158, 158, 158, 0.8)"}},le=()=>e.jsx(h,{container:!0,spacing:3,children:g.length===0?e.jsx(h,{item:!0,xs:12,children:e.jsxs(s,{sx:{textAlign:"center",py:4},children:[e.jsx(p,{variant:"h6",color:"textSecondary",children:"No job roles found"}),e.jsxs(p,{variant:"body2",color:"textSecondary",children:["Job roles array length: ",g.length]})]})}):g.map(r=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(we,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #F48FB1 0%, #F8BBD9 100%)",color:"#880E4F",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"}},children:[e.jsx(s,{sx:{position:"absolute",top:0,right:0,width:100,height:100,background:"rgba(255,255,255,0.3)",borderRadius:"50%",transform:"translate(30px, -30px)"}}),e.jsxs(Se,{sx:{flexGrow:1,position:"relative",zIndex:1},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ce,{sx:{bgcolor:"rgba(136, 14, 79, 0.2)",mr:2,width:40,height:40,color:"#880E4F"},children:e.jsx(M,{})}),e.jsxs(s,{children:[e.jsx(p,{variant:"h6",sx:{fontWeight:"bold",mb:.5,color:"#880E4F"},children:r.jobRoleName}),e.jsxs(s,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(V,{label:r.isActive,size:"small",sx:{bgcolor:r.isActive==="Active"?"rgba(76, 175, 80, 0.9)":"rgba(244, 67, 54, 0.9)",color:"white",fontWeight:"bold"}}),e.jsx(V,{label:r.experienceLevel,size:"small",sx:{bgcolor:P(r.experienceLevel),color:"white",fontWeight:"bold",fontSize:"0.7rem"}})]})]})]}),e.jsx(p,{variant:"body2",sx:{mb:2,opacity:.8,color:"#880E4F",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:r.jobRoleDescription}),e.jsx(Ee,{sx:{my:1,bgcolor:"rgba(136, 14, 79, 0.2)"}}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(p,{variant:"caption",sx:{opacity:.7,color:"#880E4F"},children:["ID: ",r.jobRoleId]}),e.jsx(p,{variant:"caption",sx:{opacity:.7,color:"#880E4F"},children:r.insertedDate})]}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(p,{variant:"caption",sx:{opacity:.7,color:"#880E4F"},children:["Updated: ",r.updatedDate]}),e.jsxs(s,{children:[e.jsx(w,{size:"small",onClick:()=>z(r.jobRoleId),sx:{color:"#880E4F","&:hover":{bgcolor:"rgba(136, 14, 79, 0.1)"}},children:e.jsx(G,{fontSize:"small"})}),e.jsx(w,{size:"small",onClick:()=>B(r.jobRoleId),sx:{color:"#880E4F","&:hover":{bgcolor:"rgba(136, 14, 79, 0.1)"}},children:e.jsx(H,{fontSize:"small"})})]})]})]})]})},r.jobRoleId))}),ne=()=>e.jsxs(Le,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(Ae,{sx:{maxHeight:440},children:e.jsxs(Ie,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(ke,{children:e.jsx(E,{children:A.map(r=>e.jsx(L,{align:r.align,style:{minWidth:r.minWidth,fontWeight:600,fontSize:15},children:r.label},r.id))})}),e.jsx(Te,{children:g.length===0?e.jsx(E,{children:e.jsx(L,{colSpan:A.length,align:"center",children:e.jsxs(s,{sx:{py:2},children:[e.jsx("div",{children:"No job roles found"}),e.jsxs("div",{style:{fontSize:"12px",color:"gray"},children:["Job roles array length: ",g.length]})]})})}):g.map(r=>e.jsx(E,{hover:!0,role:"checkbox",tabIndex:-1,children:A.map(t=>e.jsx(L,{align:t.align,children:t.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(w,{onClick:()=>z(r.jobRoleId),style:{color:"#00afb5"},children:e.jsx(G,{})}),e.jsx(w,{onClick:()=>B(r.jobRoleId),color:"error",children:e.jsx(H,{})})]}):t.id==="isActive"?e.jsx(s,{sx:{backgroundColor:r[t.id]==="Active"?"#4caf50":"#f44336",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:r[t.id]}):t.id==="experienceLevel"?e.jsx(s,{sx:{backgroundColor:P(r[t.id]),color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:r[t.id]}):t.id==="jobRoleDescription"?e.jsx(s,{sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r[t.id]}):r[t.id]},t.id))},r.jobRoleId))})]})}),e.jsx(Ne,{rowsPerPageOptions:[10,25,100],component:"div",count:W,rowsPerPage:a,page:l,onPageChange:ee,onRowsPerPageChange:re})]});return e.jsxs(s,{sx:{mt:4},children:[e.jsxs(Fe,{title:e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx("span",{children:"Job Role Management"}),e.jsx(he,{badgeContent:W,color:"primary",children:e.jsx(M,{color:"action"})})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(be,{value:T,exclusive:!0,onChange:te,size:"small",sx:{bgcolor:"background.paper"},children:[e.jsx(U,{value:"list","aria-label":"list view",children:e.jsx(pe,{})}),e.jsx(U,{value:"card","aria-label":"card view",children:e.jsx(ge,{})})]}),e.jsxs(C,{variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},sx:{display:"flex",alignItems:"center",fontSize:"15px"},onClick:ie,children:["Add Job Role",e.jsx(Je,{sx:{color:"#fff"}})]})]})]}),children:[e.jsx(h,{container:!0,spacing:We}),T==="card"?le():ne()]}),e.jsxs(je,{open:q,onClose:()=>j(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(ue,{sx:{fontWeight:"bold",fontSize:"1.25rem",backgroundColor:"#f5f5f5"},children:S?"Edit Job Role":"Add Job Role"}),e.jsxs(s,{component:"form",onSubmit:oe,noValidate:!0,sx:{p:3},children:[e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx($,{fullWidth:!0,label:"Job Role Name",name:"jobRoleName",value:i.jobRoleName,onChange:D,error:!!b.jobRoleName,helperText:b.jobRoleName,placeholder:"e.g., Frontend Developer, UI/UX Designer"})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(me,{fullWidth:!0,error:!!b.experienceLevel,children:[e.jsx(fe,{children:"Experience Level"}),e.jsxs(ve,{name:"experienceLevel",value:i.experienceLevel,onChange:D,label:"Experience Level",children:[e.jsx(O,{value:"",children:e.jsx("em",{children:"Select experience level"})}),$e.map(r=>e.jsx(O,{value:r.value,children:r.label},r.value))]}),b.experienceLevel&&e.jsx(s,{sx:{color:"error.main",fontSize:"0.75rem",mt:.5},children:b.experienceLevel})]})}),e.jsx(h,{item:!0,xs:12,children:e.jsx($,{fullWidth:!0,label:"Job Role Description",name:"jobRoleDescription",value:i.jobRoleDescription,onChange:D,error:!!b.jobRoleDescription,helperText:b.jobRoleDescription,placeholder:"Describe the job role responsibilities and requirements",multiline:!0,rows:4})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(ye,{control:e.jsx(Re,{checked:i.isActive,onChange:D,name:"isActive",color:"primary"}),label:"Active Status"})})]}),e.jsxs(De,{children:[e.jsx(C,{type:"submit",variant:"contained",style:{backgroundColor:"#00afb5",color:"white"},children:S?"Update":"Add"}),e.jsx(C,{onClick:()=>j(!1),style:{color:"#00afb5"},children:"Cancel"})]})]})]})]})};export{Xe as default};
